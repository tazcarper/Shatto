{"version":3,"sources":["plugins/layzr.js"],"names":[],"mappings":"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","file":"plugins/layzr.js","sourcesContent":["/*!\n * Layzr.js 1.4.2 - A small, fast, modern, and dependency-free library for lazy loading.\n * Copyright (c) 2015 Michael Cavalea - http://callmecavs.github.io/layzr.js/\n * License: MIT\n */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Layzr = factory();\n  }\n}(this, function() {\n'use strict';\n\n// CONSTRUCTOR\n\nfunction Layzr(options) {\n  // debounce\n  this._lastScroll = 0;\n  this._ticking    = false;\n\n  // options\n  options = options || {};\n\n  this._optionsContainer  = document.querySelector(options.container) || window;\n  this._optionsSelector   = options.selector || '[data-layzr]';\n  this._optionsAttr       = options.attr || 'data-layzr';\n  this._optionsAttrRetina = options.retinaAttr || 'data-layzr-retina';\n  this._optionsAttrBg     = options.bgAttr || 'data-layzr-bg';\n  this._optionsAttrHidden = options.hiddenAttr || 'data-layzr-hidden';\n  this._optionsThreshold  = options.threshold || 0;\n  this._optionsCallback   = options.callback || null;\n\n  // properties\n  this._retina  = window.devicePixelRatio > 1;\n  this._srcAttr = this._retina ? this._optionsAttrRetina : this._optionsAttr;\n\n  // nodelist\n  this._nodes = document.querySelectorAll(this._optionsSelector);\n\n  // scroll and resize handler\n  this._handlerBind = this._requestScroll.bind(this);\n\n  // call to create\n  this._create();\n}\n\n// DEBOUNCE HELPERS\n// adapted from: http://www.html5rocks.com/en/tutorials/speed/animations/\n\nLayzr.prototype._requestScroll = function() {\n  if(this._optionsContainer === window) {\n    this._lastScroll = window.pageYOffset;\n  }\n  else {\n    this._lastScroll = this._optionsContainer.scrollTop + this._getOffset(this._optionsContainer);\n  }\n\n  this._requestTick();\n};\n\nLayzr.prototype._requestTick = function() {\n  if(!this._ticking) {\n    requestAnimationFrame(this.update.bind(this));\n    this._ticking = true;\n  }\n};\n\n// OFFSET HELPER\n// remember, getBoundingClientRect is relative to the viewport\n\nLayzr.prototype._getOffset = function(node) {\n  return node.getBoundingClientRect().top + window.pageYOffset;\n};\n\n// HEIGHT HELPER\n\nLayzr.prototype._getContainerHeight = function() {\n  return this._optionsContainer.innerHeight\n      || this._optionsContainer.offsetHeight;\n}\n\n// LAYZR METHODS\n\nLayzr.prototype._create = function() {\n  // fire scroll event once\n  this._handlerBind();\n\n  // bind scroll and resize event\n  this._optionsContainer.addEventListener('scroll', this._handlerBind, false);\n  this._optionsContainer.addEventListener('resize', this._handlerBind, false);\n};\n\nLayzr.prototype._destroy = function() {\n  // unbind scroll and resize event\n  this._optionsContainer.removeEventListener('scroll', this._handlerBind, false);\n  this._optionsContainer.removeEventListener('resize', this._handlerBind, false);\n};\n\nLayzr.prototype._inViewport = function(node) {\n  // get viewport top and bottom offset\n  var viewportTop = this._lastScroll;\n  var viewportBottom = viewportTop + this._getContainerHeight();\n\n  // get node top and bottom offset\n  var nodeTop = this._getOffset(node);\n  var nodeBottom = nodeTop + this._getContainerHeight();\n\n  // calculate threshold, convert percentage to pixel value\n  var threshold = (this._optionsThreshold / 100) * window.innerHeight;\n\n  // return if node in viewport\n  return nodeBottom >= viewportTop - threshold\n      && nodeTop <= viewportBottom + threshold\n      && !node.hasAttribute(this._optionsAttrHidden);\n};\n\nLayzr.prototype._reveal = function(node) {\n  // get node source\n  var source = node.getAttribute(this._srcAttr) || node.getAttribute(this._optionsAttr);\n\n  // set node src or bg image\n  if(node.hasAttribute(this._optionsAttrBg)) {\n    node.style.backgroundImage = 'url(' + source + ')';\n  }\n  else {\n    node.setAttribute('src', source);\n  }\n\n  // call the callback\n  if(typeof this._optionsCallback === 'function') {\n    // \"this\" will be the node in the callback\n    this._optionsCallback.call(node);\n  }\n\n  // remove node data attributes\n  node.removeAttribute(this._optionsAttr);\n  node.removeAttribute(this._optionsAttrRetina);\n  node.removeAttribute(this._optionsAttrBg);\n  node.removeAttribute(this._optionsAttrHidden);\n};\n\nLayzr.prototype.updateSelector = function() {\n  // update cached list of nodes matching selector\n  this._nodes = document.querySelectorAll(this._optionsSelector);\n};\n\nLayzr.prototype.update = function() {\n  // cache nodelist length\n  var nodesLength = this._nodes.length;\n\n  // loop through nodes\n  for(var i = 0; i < nodesLength; i++) {\n    // cache node\n    var node = this._nodes[i];\n\n    // check if node has mandatory attribute\n    if(node.hasAttribute(this._optionsAttr)) {\n      // check if node in viewport\n      if(this._inViewport(node)) {\n        // reveal node\n        this._reveal(node);\n      }\n    }\n  }\n\n  // allow for more animation frames\n  this._ticking = false;\n};\n\nreturn Layzr;\n}));\n"],"sourceRoot":"/source/"}