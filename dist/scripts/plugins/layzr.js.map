{"version":3,"sources":["plugins/layzr.js"],"names":[],"mappings":"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","file":"plugins/layzr.js","sourcesContent":["/*!\n * Layzr.js 1.4.2 - A small, fast, modern, and dependency-free library for lazy loading.\n * Copyright (c) 2015 Michael Cavalea - http://callmecavs.github.io/layzr.js/\n * License: MIT\n */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Layzr = factory();\n  }\n}(this, function() {\n'use strict';\n\n// CONSTRUCTOR\n\nfunction Layzr(options) {\n  // debounce\n  this._lastScroll = 0;\n  this._ticking    = false;\n\n  // options\n  options = options || {};\n\n  this._optionsContainer  = document.querySelector(options.container) || window;\n  this._optionsSelector   = options.selector || '[data-layzr]';\n  this._optionsAttr       = options.attr || 'data-layzr';\n  this._optionsAttrRetina = options.retinaAttr || 'data-layzr-retina';\n  this._optionsAttrBg     = options.bgAttr || 'data-layzr-bg';\n  this._optionsAttrHidden = options.hiddenAttr || 'data-layzr-hidden';\n  this._optionsThreshold  = options.threshold || 0;\n  this._optionsCallback   = options.callback || null;\n\n  // properties\n  this._retina  = window.devicePixelRatio > 1;\n  this._srcAttr = this._retina ? this._optionsAttrRetina : this._optionsAttr;\n\n  // nodelist\n  this._nodes = document.querySelectorAll(this._optionsSelector);\n\n  // scroll and resize handler\n  this._handlerBind = this._requestScroll.bind(this);\n\n  // call to create\n  this._create();\n}\n\n// DEBOUNCE HELPERS\n// adapted from: http://www.html5rocks.com/en/tutorials/speed/animations/\n\nLayzr.prototype._requestScroll = function() {\n  if(this._optionsContainer === window) {\n    this._lastScroll = window.pageYOffset;\n  }\n  else {\n    this._lastScroll = this._optionsContainer.scrollTop + this._getOffset(this._optionsContainer);\n  }\n\n  this._requestTick();\n};\n\nLayzr.prototype._requestTick = function() {\n  if(!this._ticking) {\n    requestAnimationFrame(this.update.bind(this));\n    this._ticking = true;\n  }\n};\n\n// OFFSET HELPER\n// remember, getBoundingClientRect is relative to the viewport\n\nLayzr.prototype._getOffset = function(node) {\n  return node.getBoundingClientRect().top + window.pageYOffset;\n};\n\n// HEIGHT HELPER\n\nLayzr.prototype._getContainerHeight = function() {\n  return this._optionsContainer.innerHeight\n      || this._optionsContainer.offsetHeight;\n}\n\n// LAYZR METHODS\n\nLayzr.prototype._create = function() {\n  // fire scroll event once\n  this._handlerBind();\n\n  // bind scroll and resize event\n  this._optionsContainer.addEventListener('scroll', this._handlerBind, false);\n  this._optionsContainer.addEventListener('resize', this._handlerBind, false);\n};\n\nLayzr.prototype._destroy = function() {\n  // unbind scroll and resize event\n  this._optionsContainer.removeEventListener('scroll', this._handlerBind, false);\n  this._optionsContainer.removeEventListener('resize', this._handlerBind, false);\n};\n\nLayzr.prototype._inViewport = function(node) {\n  // get viewport top and bottom offset\n  var viewportTop = this._lastScroll;\n  var viewportBottom = viewportTop + this._getContainerHeight();\n\n  // get node top and bottom offset\n  var nodeTop = this._getOffset(node);\n  var nodeBottom = nodeTop + this._getContainerHeight();\n\n  // calculate threshold, convert percentage to pixel value\n  var threshold = (this._optionsThreshold / 100) * window.innerHeight;\n\n  // return if node in viewport\n  return nodeBottom >= viewportTop - threshold\n      && nodeTop <= viewportBottom + threshold\n      && !node.hasAttribute(this._optionsAttrHidden);\n};\n\nLayzr.prototype._reveal = function(node) {\n  // get node source\n  var source = node.getAttribute(this._srcAttr) || node.getAttribute(this._optionsAttr);\n\n  // set node src or bg image\n  if(node.hasAttribute(this._optionsAttrBg)) {\n    node.style.backgroundImage = 'url(' + source + ')';\n  }\n  else {\n    node.setAttribute('src', source);\n  }\n\n  // call the callback\n  if(typeof this._optionsCallback === 'function') {\n    // \"this\" will be the node in the callback\n    this._optionsCallback.call(node);\n  }\n\n  // remove node data attributes\n  node.removeAttribute(this._optionsAttr);\n  node.removeAttribute(this._optionsAttrRetina);\n  node.removeAttribute(this._optionsAttrBg);\n  node.removeAttribute(this._optionsAttrHidden);\n};\n\nLayzr.prototype.updateSelector = function() {\n  // update cached list of nodes matching selector\n  this._nodes = document.querySelectorAll(this._optionsSelector);\n};\n\nLayzr.prototype.update = function() {\n  // cache nodelist length\n  var nodesLength = this._nodes.length;\n\n  // loop through nodes\n  for(var i = 0; i < nodesLength; i++) {\n    // cache node\n    var node = this._nodes[i];\n\n    // check if node has mandatory attribute\n    if(node.hasAttribute(this._optionsAttr)) {\n      // check if node in viewport\n      if(this._inViewport(node)) {\n        // reveal node\n        this._reveal(node);\n      }\n    }\n  }\n\n  // allow for more animation frames\n  this._ticking = false;\n};\n\nreturn Layzr;\n}));\n"],"sourceRoot":"/source/"}