{"version":3,"sources":["plugins/layzr.js"],"names":[],"mappings":"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","file":"plugins/layzr.js","sourcesContent":["/*!\n * Layzr.js 1.4.2 - A small, fast, modern, and dependency-free library for lazy loading.\n * Copyright (c) 2015 Michael Cavalea - http://callmecavs.github.io/layzr.js/\n * License: MIT\n */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Layzr = factory();\n  }\n}(this, function() {\n'use strict';\n\n// CONSTRUCTOR\n\nfunction Layzr(options) {\n  // debounce\n  this._lastScroll = 0;\n  this._ticking    = false;\n\n  // options\n  options = options || {};\n\n  this._optionsContainer  = document.querySelector(options.container) || window;\n  this._optionsSelector   = options.selector || '[data-layzr]';\n  this._optionsAttr       = options.attr || 'data-layzr';\n  this._optionsAttrRetina = options.retinaAttr || 'data-layzr-retina';\n  this._optionsAttrBg     = options.bgAttr || 'data-layzr-bg';\n  this._optionsAttrHidden = options.hiddenAttr || 'data-layzr-hidden';\n  this._optionsThreshold  = options.threshold || 0;\n  this._optionsCallback   = options.callback || null;\n\n  // properties\n  this._retina  = window.devicePixelRatio > 1;\n  this._srcAttr = this._retina ? this._optionsAttrRetina : this._optionsAttr;\n\n  // nodelist\n  this._nodes = document.querySelectorAll(this._optionsSelector);\n\n  // scroll and resize handler\n  this._handlerBind = this._requestScroll.bind(this);\n\n  // call to create\n  this._create();\n}\n\n// DEBOUNCE HELPERS\n// adapted from: http://www.html5rocks.com/en/tutorials/speed/animations/\n\nLayzr.prototype._requestScroll = function() {\n  if(this._optionsContainer === window) {\n    this._lastScroll = window.pageYOffset;\n  }\n  else {\n    this._lastScroll = this._optionsContainer.scrollTop + this._getOffset(this._optionsContainer);\n  }\n\n  this._requestTick();\n};\n\nLayzr.prototype._requestTick = function() {\n  if(!this._ticking) {\n    requestAnimationFrame(this.update.bind(this));\n    this._ticking = true;\n  }\n};\n\n// OFFSET HELPER\n// remember, getBoundingClientRect is relative to the viewport\n\nLayzr.prototype._getOffset = function(node) {\n  return node.getBoundingClientRect().top + window.pageYOffset;\n};\n\n// HEIGHT HELPER\n\nLayzr.prototype._getContainerHeight = function() {\n  return this._optionsContainer.innerHeight\n      || this._optionsContainer.offsetHeight;\n}\n\n// LAYZR METHODS\n\nLayzr.prototype._create = function() {\n  // fire scroll event once\n  this._handlerBind();\n\n  // bind scroll and resize event\n  this._optionsContainer.addEventListener('scroll', this._handlerBind, false);\n  this._optionsContainer.addEventListener('resize', this._handlerBind, false);\n};\n\nLayzr.prototype._destroy = function() {\n  // unbind scroll and resize event\n  this._optionsContainer.removeEventListener('scroll', this._handlerBind, false);\n  this._optionsContainer.removeEventListener('resize', this._handlerBind, false);\n};\n\nLayzr.prototype._inViewport = function(node) {\n  // get viewport top and bottom offset\n  var viewportTop = this._lastScroll;\n  var viewportBottom = viewportTop + this._getContainerHeight();\n\n  // get node top and bottom offset\n  var nodeTop = this._getOffset(node);\n  var nodeBottom = nodeTop + this._getContainerHeight();\n\n  // calculate threshold, convert percentage to pixel value\n  var threshold = (this._optionsThreshold / 100) * window.innerHeight;\n\n  // return if node in viewport\n  return nodeBottom >= viewportTop - threshold\n      && nodeTop <= viewportBottom + threshold\n      && !node.hasAttribute(this._optionsAttrHidden);\n};\n\nLayzr.prototype._reveal = function(node) {\n  // get node source\n  var source = node.getAttribute(this._srcAttr) || node.getAttribute(this._optionsAttr);\n\n  // set node src or bg image\n  if(node.hasAttribute(this._optionsAttrBg)) {\n    node.style.backgroundImage = 'url(' + source + ')';\n  }\n  else {\n    node.setAttribute('src', source);\n  }\n\n  // call the callback\n  if(typeof this._optionsCallback === 'function') {\n    // \"this\" will be the node in the callback\n    this._optionsCallback.call(node);\n  }\n\n  // remove node data attributes\n  node.removeAttribute(this._optionsAttr);\n  node.removeAttribute(this._optionsAttrRetina);\n  node.removeAttribute(this._optionsAttrBg);\n  node.removeAttribute(this._optionsAttrHidden);\n};\n\nLayzr.prototype.updateSelector = function() {\n  // update cached list of nodes matching selector\n  this._nodes = document.querySelectorAll(this._optionsSelector);\n};\n\nLayzr.prototype.update = function() {\n  // cache nodelist length\n  var nodesLength = this._nodes.length;\n\n  // loop through nodes\n  for(var i = 0; i < nodesLength; i++) {\n    // cache node\n    var node = this._nodes[i];\n\n    // check if node has mandatory attribute\n    if(node.hasAttribute(this._optionsAttr)) {\n      // check if node in viewport\n      if(this._inViewport(node)) {\n        // reveal node\n        this._reveal(node);\n      }\n    }\n  }\n\n  // allow for more animation frames\n  this._ticking = false;\n};\n\nreturn Layzr;\n}));\n"],"sourceRoot":"/source/"}