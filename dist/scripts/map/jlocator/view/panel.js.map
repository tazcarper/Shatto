{"version":3,"sources":["map/jlocator/view/panel.js"],"names":[],"mappings":"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","file":"map/jlocator/view/panel.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/**\n\t* enable direction label (autocomplete etc.)\n\t* @param {Object} self - this object\n\t* @param {jQueryObject} $directionLabel - directions label\n\t* @param {jQueryObject} $input - directions input field\n\t* @param {number} latitude\n\t* @param {number} longitude\n\t*/\n\tvar enableDirectionLabel = function(self, $directionLabel, $input, latitude, longitude){\n\t\t\n\t\tvar autocomplete\n\t\t\t,listenerHandle;\n\t\t\n\t\t//add data attribute\n\t\t$directionLabel.attr('data-enabled', 'true');\n\t\t\n\t\tif($input.length > 0){\n\t\t\t\t\n\t\t\t//init input autocomplete\n\t\t\tautocomplete = new google.maps.places.Autocomplete($input.get(0));\n\t\t\tautocomplete.jlocator = {\n\t\t\t\tlatitude: latitude\n\t\t\t\t,longitude: longitude\n\t\t\t};\n\t\t\t\n\t\t\t//autocomplete listener\n\t\t\tlistenerHandle = google.maps.event.addListener(autocomplete, 'place_changed', function(){\n\t\t\n\t\t\t\tvar place\n\t\t\t\t\t,start\n\t\t\t\t\t,end\n\t\t\t\t\t,jlocator;\n\t\t\t\t\n\t\t\t\t//get jlocator data\n\t\t\t\tjlocator = this['jlocator'];\n\t\t\t\t\n\t\t\t\t//get choosen place\n\t\t\t\tplace = autocomplete.getPlace();\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tif(place && place.geometry){\n\t\t\t\t\n\t\t\t\t\t//get points\n\t\t\t\t\tstart = new google.maps.LatLng(jlocator['latitude'], jlocator['longitude']);\n\t\t\t\t\tend = new google.maps.LatLng(place.geometry.location[\"lat\"](), place.geometry.location[\"lng\"]());\n\t\t\t\t\t\n\t\t\t\t\t//trigger set directions event\n\t\t\t\t\tself.$root.trigger(self.options.setDirectionsEvent, [start, end]);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\t\n\t/**\n\t* init directions events\n\t* @param {Object} self - this object\n\t* @param {jQueryObject} $directionLabel\n\t*/\n\tvar initDirectionEvents = function(self, $directionLabel){\n\t\t\n\t\tvar $dataItem\n\t\t\t,latitude\n\t\t\t,longitude\n\t\t\t,$input\n\t\t\t,isVisible\n\t\t\t,enabled;\n\t\t\n\t\t//close all inputs\n\t\tself.$panelRoot.find('[data-type=\"directions-input\"]').hide(0);\n\t\t\t\t\n\t\tif($directionLabel.length > 0){\n\t\t\t\n\t\t\t//get vars\n\t\t\tenabled = $directionLabel.attr('data-enabled');\n\t\t\t$dataItem = $directionLabel.parents('[data-type=\"store\"]');\n\t\t\t$input = $dataItem.find('[data-type=\"directions-input\"]');\n\t\t\t\n\t\t\t//if direcion label is not enabled -> enable it (autocomplete, its handler etc.)\n\t\t\tif(!enabled && $dataItem.length > 0){\n\t\t\t\t\n\t\t\t\t//get vars\n\t\t\t\tlatitude = Number($dataItem.attr('data-latitude'));\n\t\t\t\tlongitude = Number($dataItem.attr('data-longitude'));\n\t\t\t\t\n\t\t\t\tif(!isNaN(latitude) && !isNaN(longitude)){\t\t\t\t\t\n\t\t\t\t\tenableDirectionLabel(self, $directionLabel, $input, latitude, longitude);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif($input.length > 0){\n\n\t\t\t\tisVisible = $input.is(':visible');\n\t\t\t\t\n\t\t\t\tif(isVisible){\n\t\t\t\t\t$input.hide(0);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t$input.show(0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {Object} self - 'this' object\n\t*/\n\tvar initEvents = function(self){\n\t\t\n\t\t/**\n\t\t* store onclick\n\t\t*/\n\t\tself.$root.on('click', '[data-type=\"stores\"] [data-type=\"store\"]', function(){\n\t\t\t\n\t\t\tvar store\n\t\t\t\t,$store;\n\t\t\t\n\t\t\t$store = $(this);\n\t\t\t\n\t\t\t//init store\n\t\t\tstore = new jQuery.fn.jlocator.store($store, self.options);\n\t\t\t\n\t\t\t//trigger event\n\t\t\tself.$root.trigger(self.options.storeClickEvent, [store]);\n\t\t\t\n\t\t\t//remove active class from all current visible stores\n\t\t\tself.$panelRoot.find('[data-type=\"stores\"] [data-type=\"store\"]').removeClass('active');\n\t\t\t\n\t\t\t//add active class to the current store\n\t\t\t$store.addClass('active');\n\t\t});\n\t\t\n\t\t/**\n\t\t* get stores list event\n\t\t*/\n\t\tself.$root.on(self.options.getStoresListEvent, function(){\n\t\t\t\n\t\t\t//trigger send stores list event\n\t\t\tself.$root.trigger(self.options.sendStoreListEvent, [self.stores, getStoresView(self)]);\n\t\t});\n\t\t\n\t\t/**\n\t\t* init direction events\n\t\t*/\n\t\tself.$root.on('click', '[data-type=\"directions-label\"]', function(){\t\t\t\n\t\t\tinitDirectionEvents(self, $(this));\n\t\t});\n\t\t\n\t\t/**\n\t\t* bind map pin click event\n\t\t*/\n\t\tself.$root.on(self.options.pinClickEvent, function(e, store){\n\t\t\t\n\t\t\tvar longitude = store.longitude\n\t\t\t\t,latitude = store.latitude\n\t\t\t\t,$store\n\t\t\t\t,$stores;\n\t\t\t\t\n\t\t\tif($.isNumeric(longitude) && $.isNumeric(latitude)){\n\t\t\t\t\n\t\t\t\t//get all visible stores\n\t\t\t\t$stores = self.$panelRoot.find('[data-type=\"stores\"] [data-type=\"store\"]');\n\t\t\t\n\t\t\t\t//get store\n\t\t\t\t$store = $stores.filter('[data-longitude=\"' + longitude + '\"][data-latitude=\"' + latitude + '\"]');\n\t\t\t\t\n\t\t\t\tif($store.length > 0){\n\t\t\t\t\t\n\t\t\t\t\t$stores.removeClass('active');\n\t\t\t\t\t$store.addClass('active');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\t\n\t/**\n\t* get stores view (current store list)\n\t* @param {Object} self - 'this' object\n\t* @return {Array.<jQuery.fn.jlocator.store>} - stores view (current store list)\n\t*/\n\tvar getStoresView = function(self){\n\t\t\n\t\tvar store\n\t\t\t,storesView = [];\n\t\t\n\t\tself.$panelRoot.find('[data-type=\"stores\"] [data-type=\"store\"]').each(function(){\n\t\t\t\t\t\t\n\t\t\t//init store\n\t\t\tstore = new jQuery.fn.jlocator.store($(this), self.options);\n\t\t\t\n\t\t\tstoresView.push(store);\n\t\t});\n\t\t\n\t\treturn storesView;\n\t};\n\t\n\t/**\n\t* init full stores list\n\t* @param {Object} self - 'this' object\n\t* @return {Array.<jQuery.fn.jlocator.store>} - full stores list\n\t*/\n\tvar initStoresList = function(self){\n\t\t\n\t\tvar store\n\t\t\t,stores = [];\n\t\t\n\t\tself.$stores.each(function(){\n\t\t\t\t\t\t\n\t\t\t//init store\n\t\t\tstore = new jQuery.fn.jlocator.store($(this), self.options);\n\t\t\t\n\t\t\tstores.push(store);\n\t\t});\n\t\t\n\t\treturn stores;\n\t};\n\t\n\t/**\n\t* init jplist plugin: http://jplist.no81no.com/\n\t* @param {Object} self - 'this' object\n\t* @param {jQueryObject} $root - jlocator root element\n\t*/\n\tvar initJPlist = function(self, $root){\n\t\t\n\t\tvar saveCallback = self.options.jplist.redraw_callback;\n\t\t\n\t\tif($root.length > 0){\n\t\t\n\t\t\tself.options.jplist.redraw_callback = function(){\n\t\t\t\t\n\t\t\t\tif($.isFunction(saveCallback)){\n\t\t\t\t\tsaveCallback();\n\t\t\t\t\t\n\t\t\t\t\t//trigger send stores list event\n\t\t\t\t\tself.$root.trigger(self.options.sendStoreListEvent, [self.stores, getStoresView(self)]);\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\t$root.jplist(self.options.jplist);\n\t\t}\n\t};\n\t\n\t/**\n\t* panel constructor\n\t* @param {jQueryObject} $root - jlocator root element\n\t* @param {Object} options - jlocator user options\n\t* @return {Object} - panel + this\t\n\t* @constructor \n\t*/\n\tvar Init = function($root, options){\n\t\n\t\tvar self = {\n\t\t\t$root: $root\n\t\t\t,options: options\n\t\t\t,stores: []\n\t\t\t\n\t\t\t//elements\n\t\t\t,$panelRoot: $root.find('[data-type=\"panel\"]')\n\t\t\t,$stores: null\n\t\t};\t\n\n\t\t//init vars\n\t\tself.$stores = self.$panelRoot.find('[data-type=\"stores\"] [data-type=\"store\"]');\n\t\t\n\t\t//init store list\n\t\tself.stores = initStoresList(self);\n\t\t\n\t\t//init jplist plugin\n\t\tinitJPlist(self, self.$root);\n\t\t\t\t\n\t\treturn $.extend(this, self);\n\t};\n\t\n\t/**\n\t* panel constructor\n\t* @param {jQueryObject} $root - jlocator root element\n\t* @param {Object} options - jlocator user options\n\t* @return {Object} - panel\n\t* @constructor \n\t* @name panel\n    * @class Controller\n    * @memberOf jQuery.fn.jlocator\n\t* @property {jQueryObject} $root - jlocator root element\n\t* @property {Object} options - jlocator user options\n\t* @property {Array.<jQuery.fn.jlocator.store>} stores - jlocator stores array\n\t* @property {jQueryObject} $panelRoot - panel root element\n\t* @property {jQueryObject} $stores - stores list as jquery element\n\t*/\n\tjQuery.fn.jlocator.panel = function($root, options){\n\t\t\t\t\n\t\t//call constructor\n\t\tvar self = new Init($root, options);\t\n\n\t\t//init events\n\t\tinitEvents(self);\n\t\t\n\t\treturn self;\n\t};\n})(jQuery);\n\n"],"sourceRoot":"/source/"}