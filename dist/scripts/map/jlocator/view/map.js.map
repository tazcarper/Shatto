{"version":3,"sources":["map/jlocator/view/map.js"],"names":[],"mappings":"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","file":"map/jlocator/view/map.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/**\n\t* set directions\n\t* @param {Object} self - this object\n\t* @param {Object|string} start\n\t* @param {Object|string} end\n\t*/\n\tvar setDirections = function(self, start, end){\n\t\n\t\tvar request;\n\t\t\n\t\t//init request\n\t\trequest = {\n            origin:start\n            ,destination:end\n            ,travelMode: google.maps['DirectionsTravelMode'][self.options.directionsType]\n        };\n\t\t\n\t\tself.directionsService['route'](request, function(response, status){\n\t\t\t\n\t\t\tif(status == google.maps['DirectionsStatus']['OK']){\n\t\t\t\tself.directionsDisplay['setDirections'](response);\n\t\t\t}\n        });\n\t};\n\t\n\t/**\n\t* close all info windows\n\t* @param {Object} self - this object\n\t*/\n\tvar closeAllInfoWindows = function(self){\n\t\n\t\tvar cmarker;\n\t\t\n\t\t//close all opened info windows\n\t\tfor(var i=0; i<self.markers.length; i++){\n\t\t\n\t\t\t//marker\n\t\t\tcmarker = self.markers[i];\n\t\t\t\n\t\t\tif(cmarker.infowindow){\n\t\t\t\tcmarker.infowindow.close();\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t* open info window\n\t* @param {Object} self - this object\n\t* @param {Object} marker\n\t*/\n\tvar openInfoWindow = function(self, marker){\n\t\n\t\t//close all info windows\n\t\tcloseAllInfoWindows(self);\n\t\t\n\t\t//open current info window\n\t\tmarker.infowindow.open(self.mapCanvas, marker);\n\t};\n\t\n\t/**\n\t* clear markers\n\t* @param {Object} self - this object\n\t*/\n\tvar clearMarkers = function(self){\n\t\t\n\t\tvar marker;\n\t\t\n\t\tfor(var i=0; i<self.markers.length; i++){\n\t\t\n\t\t\t//get marker\n\t\t\tmarker = self.markers[i];\n\t\t\t\n\t\t\t//clear marker\n\t\t\tmarker.setMap(null);\n\t\t}\n\t\t\n\t\t//empty markers\n\t\tself.markers = [];\n\t};\n\t\n\t/**\n\t* find marker by store\n\t* @param {Object} self - this object\n\t* @param {jQuery.fn.jlocator.store} store\n\t* @return {Object|null} marker\n\t*/\n\tvar findMarker = function(self, store){\n\t\t\n\t\tvar marker\n\t\t\t,markerStore;\n\t\t\n\t\tfor(var i=0; i<self.markers.length; i++){\n\t\t\t\n\t\t\t//get marker\n\t\t\tmarker = self.markers[i];\n\t\t\t\n\t\t\t//get marker store\n\t\t\tmarkerStore = marker['store'];\n\t\t\t\n\t\t\tif(markerStore && \n\t\t\t\tmarkerStore.latitude === store.latitude &&\n\t\t\t\tmarkerStore.longitude === store.longitude){\n\t\t\t\t\n\t\t\t\treturn marker;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t};\n\t\n\t/**\n\t* set markers\n\t* @param {Object} self - this object\n\t* @param {jQuery.fn.jlocator.store} store\n\t*/\n\tvar setMarker = function(self, store){\n\t\t\n\t\tvar infowindow\n\t\t\t,marker\n\t\t\t,markerSettings;\n\t\t\n\t\t//init info window\n\t\tinfowindow = new google.maps.InfoWindow();\n\t\t\n\t\t//set info window html\n\t\tif($.isFunction(self.options.infoWindow)){\n\t\t\tinfowindow.setContent(self.options.infoWindow(store['html'], store.title, store.address, store.city, store.state, store.zipcode, store.country));\n\t\t}\n\t\t\n\t\t//init marker settings\n\t\tmarkerSettings = {\n\t\t\tposition: store.latlng\n\t\t\t,map: self.mapCanvas\n\t\t\t,title: self.options.markerText\n\t\t};\n\t\t\n\t\t//marker icon\n\t\tif(store.customMarkerIcon !== ''){\n\t\t\tmarkerSettings.icon = store.customMarkerIcon;\n\t\t}\n\t\telse{\n\t\t\tif(self.options.markerIcon !== ''){\n\t\t\t\tmarkerSettings.icon = self.options.markerIcon;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//create marker\n\t\tmarker = new google.maps.Marker(markerSettings);\n\t\t\n\t\t$.extend(marker,{\n\t\t\tinfowindow: infowindow\n\t\t\t,store: store\n\t\t});\t\n\t\t\n\t\t//add marker to the markers list\n\t\tself.markers.push(marker);\n\t\t\n\t\tgoogle.maps.event.addListener(marker, 'click', function(e){\t\t\t\n\t\t\t\n\t\t\t//open popup\n\t\t\topenInfoWindow(self, this);\n\t\t\t\n\t\t\t//trigger event\n\t\t\tself.$root.trigger(self.options.pinClickEvent, [store]);\n\t\t});\n\t};\n\t\n\t/**\n\t* set markers\n\t* @param {Object} self - this object\n\t* @param {Array.<jQuery.fn.jlocator.store>} stores\n\t*/\n\tvar setMarkers = function(self, stores){\t\n\t\t\n\t\tvar store;\n\t\t\n\t\t//clear markers\n\t\tclearMarkers(self);\n\t\t\n\t\tfor(var i=0; i<stores.length; i++){\n\t\t\n\t\t\t//get store\n\t\t\tstore = stores[i];\n\t\t\t\n\t\t\t//set marker\n\t\t\tsetMarker(self, store);\n\t\t}\n\t};\n\t\n\t/**\n\t* set zoom\n\t* @param {Object} self - this object\n\t* @param {number} zoom\n\t*/\n\tvar setZoom = function(self, zoom){\t\n\t\tself.mapCanvas.setZoom(zoom);\n\t};\n\t\n\t/**\n\t* jump\n\t* @param {Object} self - this object\n\t* @param {google.maps.LatLng} latlng\n\t* @param {number} zoom\n\t*/\n\tvar jump = function(self, latlng, zoom){\t\n\t\tself.mapCanvas.setCenter(latlng);\n\t\tself.mapCanvas.setZoom(zoom);\n\t};\n\t\n\t/**\n\t* init geolocation\n\t* @param {Object} self - this object\n\t*/\t\n\tvar initGeolocation = function(self){\n\t\n\t\tvar latitude\n\t\t\t,longitude\n\t\t\t,latlng;\n\t\t\n\t\tif(self.options.geolocation && navigator.geolocation){\n\t\t\n\t\t\tnavigator.geolocation.getCurrentPosition(function(position){\n\t\t\t\t\n\t\t\t\tlatitude = position.coords.latitude;\n\t\t\t\tlongitude = position.coords.longitude;\t\n\t\t\t\tlatlng = new google.maps.LatLng(latitude, longitude);\n\t\t\t\t\n\t\t\t\t//jump to map\n\t\t\t\tjump(self, latlng, self.options.storeZoom);\t\n\t\t\t});\n\t\t}\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {Object} self - 'this' object\n\t*/\n\tvar initEvents = function(self){\n\t\t\n\t\t/**\n\t\t* on jump event\n\t\t*/\n\t\tself.$root.on(self.options.jumpEvent, function(e, latitude, longitude, zoom){\n\t\t\n\t\t\tvar latlng = new google.maps.LatLng(latitude, longitude);\n\t\t\t\n\t\t\tjump(self, latlng, zoom);\n\t\t});\n\t\t\n\t\t/**\n\t\t* on init zoom event\n\t\t*/\n\t\tself.$root.on(self.options.initZoomEvent, function(e, zoom){\t\t\n\t\t\tsetZoom(self, zoom);\n\t\t});\n\t\t\n\t\t/**\n\t\t* bind store click event\n\t\t*/\n\t\tself.$root.on(self.options.storeClickEvent, function(e, store){\n\t\t\t\n\t\t\tvar marker;\n\t\t\t\n\t\t\tif(store){\n\t\t\t\n\t\t\t\t//close all info windows\n\t\t\t\tcloseAllInfoWindows(self);\n\t\t\t\t\t\t\t\t\n\t\t\t\t//jump to the store\n\t\t\t\tjump(self, store.latlng, store.zoom);\n\t\t\t\t\n\t\t\t\tif(self.options.openInfoWindowOnStoreClick){\n\t\t\t\t\t\n\t\t\t\t\t//get marker by store\n\t\t\t\t\tmarker = findMarker(self, store);\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tif(marker){\n\t\t\t\t\t\tgoogle.maps.event.trigger(marker, 'click');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\t/**\n\t\t* bind stores list event\n\t\t*/\n\t\tself.$root.on(self.options.sendStoreListEvent, function(e, fullStoresList, storesView){\n\t\t\t\n\t\t\tsetMarkers(self, storesView);\n\t\t});\n\t\t\n\t\t/**\n\t\t* bind set directions event\n\t\t*/\n\t\tself.$root.on(self.options.setDirectionsEvent, function(e, start, end){\t\t\t\n\t\t\tsetDirections(self, start, end);\t\t\t\n\t\t});\n\t};\n\t\n\t/**\n\t* init map\n\t* @param {Object} self - 'this' object\n\t* @param {jQueryObject} $mapRoot - map root jquery element\n\t*/\n\tvar initMap = function(self, $mapRoot){\n\t\t\n\t\tvar pyrmont;\n\t\t\t\t\n\t\tif(google && google.maps){\n\t\t\n\t\t\tgoogle.maps.event.addDomListener(window, 'load', function(){\n\t\t\t\t\n\t\t\t\t//directions\n\t\t\t\tself.directionsService = new google.maps['DirectionsService']();\n\t\t\t\tself.directionsDisplay = new google.maps['DirectionsRenderer']();\t\n\t\t\n\t\t\t\t//init pyrmont\n\t\t\t\tpyrmont = new google.maps.LatLng(self.options.latitude, self.options.longitude);\n\t\t\t\t\n\t\t\t\t//create map\n\t\t\t\tself.mapCanvas = new google.maps.Map(self.$mapRoot.get(0), \n\t\t\t\t{\n\t\t\t\t\tmapTypeId: google.maps.MapTypeId[self.options.mapTypeId]\n\t\t\t\t\t,center: pyrmont\n\t\t\t\t\t,zoom: self.options.startZoom\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//init directions display\n\t\t\t\tself.directionsDisplay.setMap(self.mapCanvas);\n\t\t\t\t\n\t\t\t\t//init events\n\t\t\t\tinitEvents(self);\n\t\t\t\t\n\t\t\t\t//get stores list -> draw markers\n\t\t\t\tself.$root.trigger(self.options.getStoresListEvent, []);\n\t\t\t\t\n\t\t\t\t//init geolocation (if needed)\n\t\t\t\tinitGeolocation(self);\n\t\t\t});\n\t\t}\n\t};\n\t\n\t/**\n\t* map constructor\n\t* @param {jQueryObject} $root - jlocator root element\n\t* @param {Object} options - jlocator user options\n\t* @return {Object} - map + this\t\n\t* @constructor \n\t*/\n\tvar Init = function($root, options){\n\t\n\t\tvar self = {\n\t\t\t$root: $root\n\t\t\t,options: options\n\t\t\t\n\t\t\t//map\n\t\t\t,mapCanvas: null\n\t\t\t,geocoder: null\n\t\t\t,markers: []\n\t\t\t\n\t\t\t//jplist\n\t\t\t,$mapRoot: $root.find('[data-type=\"map\"]')\n\t\t\t\n\t\t\t//directions\n\t\t\t,directionsService: null\n\t\t\t,directionsDisplay: null\n\t\t};\t\t\n\t\t\n\t\t//init map\n\t\tinitMap(self, self.$mapRoot);\n\t\t\t\t\n\t\treturn $.extend(this, self);\n\t};\n\t\n\t/**\n\t* map\n\t* @param {jQueryObject} $root - jlocator root element\n\t* @param {Object} options - jlocator user options\n\t* @return {Object} - map\n\t* @constructor \n\t* @name map\n    * @class Controller\n    * @memberOf jQuery.fn.jlocator\n\t* @property {jQueryObject} $root - jlocator root element\n\t* @property {Object} options - jlocator user options\n\t* @property {Object} mapCanvas - map convas element\n\t* @property {Object} geocoder - google geocoder element\n\t* @property {jQueryObject} $mapRoot - map root element\n\t* @property {Object} directionsService - google directions service\n\t* @property {Object} directionsDisplay - google directions display\n\t*/\n\tjQuery.fn.jlocator.map = function($root, options){\n\t\t\t\t\n\t\t//call constructor\n\t\treturn new Init($root, options);\t\n\t};\n})(jQuery);\n\n"],"sourceRoot":"/source/"}