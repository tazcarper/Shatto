{"version":3,"sources":["map/jlocator/controls/autocomplete.js"],"names":[],"mappings":"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","file":"map/jlocator/controls/autocomplete.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/** \n\t* autocomplete control\n\t* @type {Object} \n\t* @name Autocomplete\n    * @class autocomplete Control\n    * @memberOf jQuery.fn.jplist.controls\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete = {};\n\t\n\t/**\n\t* render control html\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.render = function(control){\n\t\t\n\t\tvar autocomplete\n\t\t\t,zoom\n\t\t\t,options = {};\n\t\t\t\n\t\tif(control.controlTypeOptions){\n\t\t\toptions = control.controlTypeOptions;\n\t\t}\n\t\t\n\t\t//init autocomplete\n\t\tautocomplete = new google.maps.places.Autocomplete(control.$control.get(0), options);\n\t\t\n\t\t//init zoom\n\t\tzoom = Number(control.$control.attr('data-zoom'));\n\t\t\n\t\tif(isNaN(zoom)){\n\t\t\tzoom = 17;\n\t\t}\n\t\t\t\t\t\n\t\t//add data\n\t\tcontrol.$control.data('jplist-autocomplete', autocomplete);\n\t\tcontrol.$control.data('jplist-autocomplete-zoom', zoom);\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.initEvents = function(control){\n\t\n\t\tvar autocomplete\n\t\t\t,listenerHandle = control.$control.data('jplist-handle');\n\t\t\t\t\n\t\t//get autocomplete\n\t\tautocomplete = control.$control.data('jplist-autocomplete');\n\t\t\t\t\n\t\t//remove listener\n\t\tif(listenerHandle){\n\t\t\tgoogle.maps.event.removeListener(listenerHandle);\n\t\t}\n\t\t\n\t\t//add listener\n\t\tlistenerHandle = google.maps.event.addListener(autocomplete, 'place_changed', function(){\n\t\t\t\n\t\t\tvar place\n\t\t\t\t,lat\n\t\t\t\t,lng;\n\t\t\t\n\t\t\t//get choosen place\n\t\t\tplace = autocomplete.getPlace();\n\t\t\t\t\t\t\n\t\t\t//set latitude and longitude\n\t\t\tif(place.geometry){\n\t\t\t\n\t\t\t\tlat = place.geometry.location['lat']();\n\t\t\t\tlng = place.geometry.location['lng']();\n\t\t\t\t\n\t\t\t\tcontrol.$control.attr('data-latitude', lat);\n\t\t\t\tcontrol.$control.attr('data-longitude', lng);\n\t\t\t\tcontrol.$control.attr('data-name', place.name);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t//trigger jump to map event\n\t\t\t\tcontrol.$jplistBox.trigger('jumpEvent', [lat, lng, control.$control.data('jplist-autocomplete-zoom')]);\n\t\t\t}\n\t\t\t\n\t\t\t//send panel redraw event\n\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\tconsole.log('auto complete done');\n\t\t\t$('.mapOverlay').addClass('shrink');\n\t\t});\n\t\t\n\t\tcontrol.$control.off('keyup').on('keyup', function(e){\t\n\n\t\t\tvar val;\n\t\t\t\n\t\t\t//get val\n\t\t\tval = $.trim($(this).val());\n\t\t\t\n\t\t\tif(val === ''){\n\t\t\t\t\n\t\t\t\tcontrol.$control.attr('data-latitude', '');\n\t\t\t\tcontrol.$control.attr('data-longitude', '');\n\t\t\t\t\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t}\n\t\t});\n\t\t\n\t\t//save handler\n\t\tcontrol.$control.data('jplist-handle', listenerHandle);\n\t};\n\n    /**\n\t* Set control status\n\t* @param {jQuery.fn.jplist.models.Status} status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {boolean} isCookie - is status restored from cookies\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.setStatus = function(status, control, isCookie){\n\n        //console.log(status.data);\n\t};\n\n\t/**\n\t* get current control status\n\t* @param {boolean} isDefault - if true, get default (initial) control status; else - get current control status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.getStatus = function(isDefault, control){\n\t\t\n\t\tvar status = null\n\t\t\t,latitude\n\t\t\t,longitude\n\t\t\t,data;\n\n        //get attributes\n\t\tlatitude = control.$control.attr('data-latitude');\n\t\tlongitude = control.$control.attr('data-longitude');\n\n        data = {\n            name: control.$control.attr('data-name')\n\t\t\t,radius: control.$control.attr('data-radius')\n            ,filterType: 'autocomplete'\n        };\n\n        if(isDefault){\n\n            data.latitude = '';\n            data.longitude = '';\n\n            status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n        }\n        else{\n            if($.isNumeric(latitude) && $.isNumeric(longitude)){\n\n                data.latitude = latitude;\n                data.longitude = longitude;\n                status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n            }\n        }\n\n\t\treturn status;\t\t\n\t};\n\t\n\t\n})(jQuery);\n\n"],"sourceRoot":"/source/"}