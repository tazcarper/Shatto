{"version":3,"sources":["map/jlocator/controls/autocomplete.js"],"names":[],"mappings":"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","file":"map/jlocator/controls/autocomplete.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/** \n\t* autocomplete control\n\t* @type {Object} \n\t* @name Autocomplete\n    * @class autocomplete Control\n    * @memberOf jQuery.fn.jplist.controls\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete = {};\n\t\n\t/**\n\t* render control html\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.render = function(control){\n\t\t\n\t\tvar autocomplete\n\t\t\t,zoom\n\t\t\t,options = {};\n\t\t\t\n\t\tif(control.controlTypeOptions){\n\t\t\toptions = control.controlTypeOptions;\n\t\t}\n\t\t\n\t\t//init autocomplete\n\t\tautocomplete = new google.maps.places.Autocomplete(control.$control.get(0), options);\n\t\t\n\t\t//init zoom\n\t\tzoom = Number(control.$control.attr('data-zoom'));\n\t\t\n\t\tif(isNaN(zoom)){\n\t\t\tzoom = 17;\n\t\t}\n\t\t\t\t\t\n\t\t//add data\n\t\tcontrol.$control.data('jplist-autocomplete', autocomplete);\n\t\tcontrol.$control.data('jplist-autocomplete-zoom', zoom);\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.initEvents = function(control){\n\t\n\t\tvar autocomplete\n\t\t\t,listenerHandle = control.$control.data('jplist-handle');\n\t\t\t\t\n\t\t//get autocomplete\n\t\tautocomplete = control.$control.data('jplist-autocomplete');\n\t\t\t\t\n\t\t//remove listener\n\t\tif(listenerHandle){\n\t\t\tgoogle.maps.event.removeListener(listenerHandle);\n\t\t}\n\t\t\n\t\t//add listener\n\t\tlistenerHandle = google.maps.event.addListener(autocomplete, 'place_changed', function(){\n\t\t\t\n\t\t\tvar place\n\t\t\t\t,lat\n\t\t\t\t,lng;\n\t\t\t\n\t\t\t//get choosen place\n\t\t\tplace = autocomplete.getPlace();\n\t\t\t\t\t\t\n\t\t\t//set latitude and longitude\n\t\t\tif(place.geometry){\n\t\t\t\n\t\t\t\tlat = place.geometry.location['lat']();\n\t\t\t\tlng = place.geometry.location['lng']();\n\t\t\t\t\n\t\t\t\tcontrol.$control.attr('data-latitude', lat);\n\t\t\t\tcontrol.$control.attr('data-longitude', lng);\n\t\t\t\tcontrol.$control.attr('data-name', place.name);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t//trigger jump to map event\n\t\t\t\tcontrol.$jplistBox.trigger('jumpEvent', [lat, lng, control.$control.data('jplist-autocomplete-zoom')]);\n\t\t\t}\n\t\t\t\n\t\t\t//send panel redraw event\n\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\tconsole.log('auto complete done');\n\t\t\t$('.mapOverlay').addClass('shrink');\n\t\t});\n\t\t\n\t\tcontrol.$control.off('keyup').on('keyup', function(e){\t\n\n\t\t\tvar val;\n\t\t\t\n\t\t\t//get val\n\t\t\tval = $.trim($(this).val());\n\t\t\t\n\t\t\tif(val === ''){\n\t\t\t\t\n\t\t\t\tcontrol.$control.attr('data-latitude', '');\n\t\t\t\tcontrol.$control.attr('data-longitude', '');\n\t\t\t\t\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t}\n\t\t});\n\t\t\n\t\t//save handler\n\t\tcontrol.$control.data('jplist-handle', listenerHandle);\n\t};\n\n    /**\n\t* Set control status\n\t* @param {jQuery.fn.jplist.models.Status} status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {boolean} isCookie - is status restored from cookies\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.setStatus = function(status, control, isCookie){\n\n        //console.log(status.data);\n\t};\n\n\t/**\n\t* get current control status\n\t* @param {boolean} isDefault - if true, get default (initial) control status; else - get current control status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.Autocomplete\n\t*/\n\tjQuery.fn.jplist.controls.Autocomplete.getStatus = function(isDefault, control){\n\t\t\n\t\tvar status = null\n\t\t\t,latitude\n\t\t\t,longitude\n\t\t\t,data;\n\n        //get attributes\n\t\tlatitude = control.$control.attr('data-latitude');\n\t\tlongitude = control.$control.attr('data-longitude');\n\n        data = {\n            name: control.$control.attr('data-name')\n\t\t\t,radius: control.$control.attr('data-radius')\n            ,filterType: 'autocomplete'\n        };\n\n        if(isDefault){\n\n            data.latitude = '';\n            data.longitude = '';\n\n            status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n        }\n        else{\n            if($.isNumeric(latitude) && $.isNumeric(longitude)){\n\n                data.latitude = latitude;\n                data.longitude = longitude;\n                status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n            }\n        }\n\n\t\treturn status;\t\t\n\t};\n\t\n\t\n})(jQuery);\n\n"],"sourceRoot":"/source/"}