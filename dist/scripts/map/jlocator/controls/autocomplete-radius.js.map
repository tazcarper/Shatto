{"version":3,"sources":["map/jlocator/controls/autocomplete-radius.js"],"names":[],"mappings":"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","file":"map/jlocator/controls/autocomplete-radius.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/** \n\t* autocomplete control\n\t* @type {Object} \n\t* @name AutocompleteRadius\n    * @class AutocompleteRadius Control\n    * @memberOf jQuery.fn.jplist.controls\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius = {};\n\t\n\t/**\n\t* render control html\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.AutocompleteRadius\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius.render = function(control){\n\t\t\n\t\tvar autocomplete\n\t\t\t,$input\n\t\t\t,$select\n\t\t\t,zoom\n\t\t\t,options = {};\n\t\t\n\t\t//get jquery elements\n\t\t$input = control.$control.find('input');\n\t\t$select = control.$control.find('select');\n\t\t\n\t\tif(control.controlTypeOptions){\n\t\t\toptions = control.controlTypeOptions;\n\t\t}\n\t\t\n\t\t//init autocomolete\n\t\tautocomplete = new google.maps.places.Autocomplete($input.get(0), options);\n\t\t\n\t\t//init zoom\n\t\tzoom = Number(control.$control.attr('data-zoom'));\n\t\t\n\t\tif(isNaN(zoom)){\n\t\t\tzoom = 17;\n\t\t}\n\t\t\n\t\t//add data\n\t\tcontrol.$control.data('jlocator-autocomplete-with-radius', autocomplete);\n\t\tcontrol.$control.data('jlocator-autocomplete-with-radius-input', $input);\n\t\tcontrol.$control.data('jlocator-autocomplete-with-radius-select', $select);\n\t\tcontrol.$control.data('jplist-autocomplete-with-radius-zoom', zoom);\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.AutocompleteRadius\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius.initEvents = function(control){\n\t\n\t\tvar autocomplete\n\t\t\t,listenerHandle = control.$control.data('jplist-handle2')\n\t\t\t,$input\n\t\t\t,$select;\n\t\t\t\t\n\t\t//get autocomplete\n\t\tautocomplete = control.$control.data('jlocator-autocomplete-with-radius');\n\t\t$input = control.$control.data('jlocator-autocomplete-with-radius-input');\n\t\t$select = control.$control.data('jlocator-autocomplete-with-radius-select');\n\t\t\t\t\t\t\n\t\t//remove listener\n\t\tif(listenerHandle){\n\t\t\tgoogle.maps.event.removeListener(listenerHandle);\n\t\t}\n\t\t\n\t\t//add listener\n\t\tlistenerHandle = google.maps.event.addListener(autocomplete, 'place_changed', function(){\n\t\t\t\n\t\t\tvar place\n\t\t\t\t,lat\n\t\t\t\t,lng;\n\t\t\t\n\t\t\t//get choosen place\n\t\t\tplace = autocomplete.getPlace();\n\t\t\t\t\t\t\n\t\t\t//set latitude and longitude\n\t\t\tif(place.geometry){\n\t\t\t\t\t\t\n\t\t\t\tlat = place.geometry.location['lat']();\n\t\t\t\tlng = place.geometry.location['lng']();\n\t\t\t\t\n\t\t\t\tcontrol.$control.attr('data-latitude', lat);\n\t\t\t\tcontrol.$control.attr('data-longitude', lng);\n\t\t\t\tcontrol.$control.attr('data-name', place.name);\n\t\t\t\t\n\t\t\t\t//trigger jump to map event\n\t\t\t\tcontrol.$jplistBox.trigger('jumpEvent', [lat, lng, control.$control.data('jplist-autocomplete-with-radius-zoom')]);\n\t\t\t}\n\t\t\t\n\t\t\t//send panel redraw event\n\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t});\n\t\t\n\t\tif($input.length > 0 && $select.length > 0){\n\t\t\n\t\t\t$input.off('keyup').on('keyup', function(e){\t\n\n\t\t\t\tvar val;\n\t\t\t\t\n\t\t\t\t//get val\n\t\t\t\tval = $.trim($(this).val());\n\t\t\t\n\t\t\t\tif(val === ''){\n\t\t\t\t\t\n\t\t\t\t\tcontrol.$control.attr('data-latitude', '');\n\t\t\t\t\tcontrol.$control.attr('data-longitude', '');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t//send panel redraw event\n\t\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//init select change\n\t\t\t$select.change(function(){\n\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t});\n\t\t}\n\t\t\n\t\t//save handler\n\t\tcontrol.$control.data('jplist-handle2', listenerHandle);\n\t};\n\t\n\t/**\n\t* get current control status\n\t* @param {boolean} isDefault - if true, get default (initial) control status; else - get current control status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.AutocompleteRadius\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius.getStatus = function(isDefault, control){\n\t\t\n\t\tvar status = null\n\t\t\t,latitude\n\t\t\t,longitude\n\t\t\t,data\n\t\t\t,units\n\t\t\t,$select\n\t\t\t,distanceValue\n\t\t\t,distanceInMeters;\n\t\t\t\t\t\n\t\t//get attributes\n\t\tlatitude = control.$control.attr('data-latitude');\n\t\tlongitude = control.$control.attr('data-longitude');\n\t\tunits = control.$control.attr('data-units');\n\t\t\n\t\t//get select\n\t\t$select = control.$control.data('jlocator-autocomplete-with-radius-select');\n\n        if($select.length > 0){\n\n            //check if distance is a number\n\t\t\tdistanceValue = parseFloat($select.val());\n\n            if(!isNaN(distanceValue)){\n\n\n                if(units && units.toString() === 'km'){\n\n\t\t\t\t\tdistanceInMeters = distanceValue * 1000;\n\t\t\t\t}\n\t\t\t\telse{ //miles\n\n\t\t\t\t\t//get distance in meters: 1 Mile = 1609.34 meters\n\t\t\t\t\tdistanceInMeters = distanceValue * 1609.34;\n\t\t\t\t}\n\n                 data = {\n                    name: control.$control.attr('data-name')\n                    ,radius: distanceInMeters\n                    ,filterType: 'autocomplete'\n                };\n\n                if(isDefault){\n                    data.latitude = '';\n                    data.longitude = '';\n                    status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n                }\n                else{\n                    if($.isNumeric(latitude) && $.isNumeric(longitude)){\n\n                        data.latitude = latitude;\n                        data.longitude = longitude;\n                        status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n                    }\n                }\n            }\n        }\n\t\t\n\t\treturn status;\t\t\n\t};\n\t\n\t\n})(jQuery);\n\n"],"sourceRoot":"/source/"}