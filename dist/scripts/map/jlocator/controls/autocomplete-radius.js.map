{"version":3,"sources":["map/jlocator/controls/autocomplete-radius.js"],"names":[],"mappings":"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","file":"map/jlocator/controls/autocomplete-radius.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/** \n\t* autocomplete control\n\t* @type {Object} \n\t* @name AutocompleteRadius\n    * @class AutocompleteRadius Control\n    * @memberOf jQuery.fn.jplist.controls\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius = {};\n\t\n\t/**\n\t* render control html\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.AutocompleteRadius\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius.render = function(control){\n\t\t\n\t\tvar autocomplete\n\t\t\t,$input\n\t\t\t,$select\n\t\t\t,zoom\n\t\t\t,options = {};\n\t\t\n\t\t//get jquery elements\n\t\t$input = control.$control.find('input');\n\t\t$select = control.$control.find('select');\n\t\t\n\t\tif(control.controlTypeOptions){\n\t\t\toptions = control.controlTypeOptions;\n\t\t}\n\t\t\n\t\t//init autocomolete\n\t\tautocomplete = new google.maps.places.Autocomplete($input.get(0), options);\n\t\t\n\t\t//init zoom\n\t\tzoom = Number(control.$control.attr('data-zoom'));\n\t\t\n\t\tif(isNaN(zoom)){\n\t\t\tzoom = 17;\n\t\t}\n\t\t\n\t\t//add data\n\t\tcontrol.$control.data('jlocator-autocomplete-with-radius', autocomplete);\n\t\tcontrol.$control.data('jlocator-autocomplete-with-radius-input', $input);\n\t\tcontrol.$control.data('jlocator-autocomplete-with-radius-select', $select);\n\t\tcontrol.$control.data('jplist-autocomplete-with-radius-zoom', zoom);\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.AutocompleteRadius\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius.initEvents = function(control){\n\t\n\t\tvar autocomplete\n\t\t\t,listenerHandle = control.$control.data('jplist-handle2')\n\t\t\t,$input\n\t\t\t,$select;\n\t\t\t\t\n\t\t//get autocomplete\n\t\tautocomplete = control.$control.data('jlocator-autocomplete-with-radius');\n\t\t$input = control.$control.data('jlocator-autocomplete-with-radius-input');\n\t\t$select = control.$control.data('jlocator-autocomplete-with-radius-select');\n\t\t\t\t\t\t\n\t\t//remove listener\n\t\tif(listenerHandle){\n\t\t\tgoogle.maps.event.removeListener(listenerHandle);\n\t\t}\n\t\t\n\t\t//add listener\n\t\tlistenerHandle = google.maps.event.addListener(autocomplete, 'place_changed', function(){\n\t\t\t\n\t\t\tvar place\n\t\t\t\t,lat\n\t\t\t\t,lng;\n\t\t\t\n\t\t\t//get choosen place\n\t\t\tplace = autocomplete.getPlace();\n\t\t\t\t\t\t\n\t\t\t//set latitude and longitude\n\t\t\tif(place.geometry){\n\t\t\t\t\t\t\n\t\t\t\tlat = place.geometry.location['lat']();\n\t\t\t\tlng = place.geometry.location['lng']();\n\t\t\t\t\n\t\t\t\tcontrol.$control.attr('data-latitude', lat);\n\t\t\t\tcontrol.$control.attr('data-longitude', lng);\n\t\t\t\tcontrol.$control.attr('data-name', place.name);\n\t\t\t\t\n\t\t\t\t//trigger jump to map event\n\t\t\t\tcontrol.$jplistBox.trigger('jumpEvent', [lat, lng, control.$control.data('jplist-autocomplete-with-radius-zoom')]);\n\t\t\t}\n\t\t\t\n\t\t\t//send panel redraw event\n\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t});\n\t\t\n\t\tif($input.length > 0 && $select.length > 0){\n\t\t\n\t\t\t$input.off('keyup').on('keyup', function(e){\t\n\n\t\t\t\tvar val;\n\t\t\t\t\n\t\t\t\t//get val\n\t\t\t\tval = $.trim($(this).val());\n\t\t\t\n\t\t\t\tif(val === ''){\n\t\t\t\t\t\n\t\t\t\t\tcontrol.$control.attr('data-latitude', '');\n\t\t\t\t\tcontrol.$control.attr('data-longitude', '');\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t//send panel redraw event\n\t\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t//init select change\n\t\t\t$select.change(function(){\n\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t});\n\t\t}\n\t\t\n\t\t//save handler\n\t\tcontrol.$control.data('jplist-handle2', listenerHandle);\n\t};\n\t\n\t/**\n\t* get current control status\n\t* @param {boolean} isDefault - if true, get default (initial) control status; else - get current control status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.AutocompleteRadius\n\t*/\n\tjQuery.fn.jplist.controls.AutocompleteRadius.getStatus = function(isDefault, control){\n\t\t\n\t\tvar status = null\n\t\t\t,latitude\n\t\t\t,longitude\n\t\t\t,data\n\t\t\t,units\n\t\t\t,$select\n\t\t\t,distanceValue\n\t\t\t,distanceInMeters;\n\t\t\t\t\t\n\t\t//get attributes\n\t\tlatitude = control.$control.attr('data-latitude');\n\t\tlongitude = control.$control.attr('data-longitude');\n\t\tunits = control.$control.attr('data-units');\n\t\t\n\t\t//get select\n\t\t$select = control.$control.data('jlocator-autocomplete-with-radius-select');\n\n        if($select.length > 0){\n\n            //check if distance is a number\n\t\t\tdistanceValue = parseFloat($select.val());\n\n            if(!isNaN(distanceValue)){\n\n\n                if(units && units.toString() === 'km'){\n\n\t\t\t\t\tdistanceInMeters = distanceValue * 1000;\n\t\t\t\t}\n\t\t\t\telse{ //miles\n\n\t\t\t\t\t//get distance in meters: 1 Mile = 1609.34 meters\n\t\t\t\t\tdistanceInMeters = distanceValue * 1609.34;\n\t\t\t\t}\n\n                 data = {\n                    name: control.$control.attr('data-name')\n                    ,radius: distanceInMeters\n                    ,filterType: 'autocomplete'\n                };\n\n                if(isDefault){\n                    data.latitude = '';\n                    data.longitude = '';\n                    status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n                }\n                else{\n                    if($.isNumeric(latitude) && $.isNumeric(longitude)){\n\n                        data.latitude = latitude;\n                        data.longitude = longitude;\n                        status = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, true);\n                    }\n                }\n            }\n        }\n\t\t\n\t\treturn status;\t\t\n\t};\n\t\n\t\n})(jQuery);\n\n"],"sourceRoot":"/source/"}