{"version":3,"sources":["map/jplist/controller/controller.js"],"names":[],"mappings":"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","file":"map/jplist/controller/controller.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\t\n\t/**\n\t* build collection html\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {Array.<jQuery.fn.jplist.models.Status>} statuses\n\t*/\n\tvar buildCollectionHtml = function(self, collection, statuses){\n\t\t\n\t\tvar $dataitems = collection.dataitemsToJqueryObject()\n\t\t\t,$dataview = collection.dataviewToJqueryObject();\n\n\t\tif($dataitems.length > 0){\n\t\t\t$dataitems.detach();\n\t\t}\n\t\t\n\t\tif($dataview.length > 0){\n\t\t\tself.$itemsBox.append($dataview);\n\t\t}\t\t\n\t\t\n\t\t//send redraw event\n\t\tself.$jplistBox.trigger(self.options.answer_event, [statuses, collection]);\n\t\t\n\t\t//no results found\n\t\tif(collection.dataview.length <=0){\n\t\t\tself.$noResults.removeClass('jplist-hidden');\n\t\t\tself.$itemsBox.addClass('jplist-hidden');\n\t\t}\n\t\telse{\n\t\t\tself.$noResults.addClass('jplist-hidden');\n\t\t\tself.$itemsBox.removeClass('jplist-hidden');\n\t\t}\n\t\t\n\t\t//redraw callback\n\t\tif($.isFunction(self.options.redraw_callback)){\n\t\t\tself.options.redraw_callback(collection, $dataview, statuses);\n\t\t}\n\t};\n\t\n\t/**\n\t* animate to top\n\t* @param {Object} self - jplist panel 'this' object\n\t*/\n\tvar animateToTop = function(self){\n\t\t\n\t\tvar offset;\n\t\t\n\t\tif(self.options.animate_to_top !== ''){\n\t\t\n\t\t\t//set offset\n\t\t\tif(self.options.animate_to_top !== 'auto'){\n\t\t\t\toffset = $(self.options.animate_to_top).offset().top;\n\t\t\t}\n\t\t\telse{\n\t\t\t\toffset = self.$jplistBox.offset().top;\n\t\t\t}\n\t\t\t\n\t\t\t$('html, body').animate({\n\t\t\t\tscrollTop: offset\n\t\t\t}, self.options.animate_to_top_duration);\n\t\t}\n\t};\n\t\n\t/**\n\t* update collection dataview: sorting\n\t* @param {Object} self - jplist controller 'this' object\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {Array.<jQuery.fn.jplist.models.Status>} statuses\n\t*/\n\tvar updateDataviewSort = function(self, collection, statuses){\n\t\n\t\tvar actionStatuses;\n\t\t\n\t\t//sort\n\t\tactionStatuses = jQuery.fn.jplist.services.Status.getStatusesByAction('sort', statuses);\n\n        if(actionStatuses.length > 0){\n\t\t\n\t\t    jQuery.fn.jplist.actions.Sort.doubleSort(actionStatuses, collection.dataview);\n\t\t\t\n\t\t\t//trigger sort event\n\t\t\tself.$jplistBox.trigger(self.options.sort_event, [statuses, collection]);\n        }\n\t};\n\t\n\t/**\n\t* modify dataview: filtering\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {jQuery.fn.jplist.models.Status} status\n\t*/\n\tvar modifyDataviewCallback = function(collection, status){\n\t\t\n\t\tcollection.modifyDataview(function(dataview){\t\t\n\t\t\t\t\n\t\t\tvar path;\n\n\t\t\t//get path\n\t\t\tpath = new jQuery.fn.jplist.models.Path(status.data.path, null); \n\t\t\t\n\t\t\t//update dataview\n\t\t\tswitch(status.data.filterType){\n\t\t\t\t\n\t\t\t\tcase 'text':{\t\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.textFilter(\n\t\t\t\t\t\tstatus.data.value\n\t\t\t\t\t\t,path\n\t\t\t\t\t\t,dataview\n\t\t\t\t\t\t,status.data.ignore\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'path':{\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.pathFilter(\n\t\t\t\t\t\tpath\n\t\t\t\t\t\t,dataview\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\t\t\t\t\t\n\t\t\t\t\n\t\t\t\tcase 'inverted_path':{\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.invertedPathFilter(\n\t\t\t\t\t\tstatus.data['checked_checkboxes']\n\t\t\t\t\t\t,dataview\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'range':{\t\t\t\t\t\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.rangeFilter(\n\t\t\t\t\t\tpath\n\t\t\t\t\t\t, dataview\n\t\t\t\t\t\t, status.data.min\n\t\t\t\t\t\t, status.data.max\n\t\t\t\t\t\t, status.data.prev\n\t\t\t\t\t\t, status.data.next\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'date':{\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.dateFilter(\n\t\t\t\t\t\tstatus.data['year']\n\t\t\t\t\t\t, status.data['month']\n\t\t\t\t\t\t, status.data['day']\n\t\t\t\t\t\t, path, dataview\n\t\t\t\t\t\t, status.data['format']\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase 'date_range':{\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.dateRangeFilter(\n\t\t\t\t\t\tpath\n\t\t\t\t\t\t,dataview\n\t\t\t\t\t\t,status.data['format']\n\t\t\t\t\t\t,status.data['prev_year']\n\t\t\t\t\t\t,status.data['prev_month']\n\t\t\t\t\t\t,status.data['prev_day']\n\t\t\t\t\t\t,status.data['next_year']\n\t\t\t\t\t\t,status.data['next_month']\n\t\t\t\t\t\t,status.data['next_day']\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\t//filter by paths group - used in checkboxes group filter\n\t\t\t\tcase 'pathGroup':{\t\t\t\t\t\t\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.pathGroupFilter(\n\t\t\t\t\t\tstatus.data['pathGroup']\n\t\t\t\t\t\t, dataview\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n                //filter by text group in the single path - used in checkboxes text filter\n                case 'textGroup':{\n                    collection.dataview = jQuery.fn.jplist.actions.Filters.textGroupFilter(\n\t\t\t\t\t\tstatus.data['textGroup']\n                        ,status.data['logic']\n                        ,status.data['path']\n                        ,status.data['ignoreRegex']\n\t\t\t\t\t\t,dataview\n\t\t\t\t\t);\n                }\n                break;\n\t\t\t\t\n\t\t\t\t//filter by text value in the group of paths - used in button text group filter\n                case 'textFilterPathGroup':{\t\t\t\t\t\n                    collection.dataview = jQuery.fn.jplist.actions.Filters.textFilterPathGroup(\n                        status.data['textAndPathsGroup']\n                        ,status.data['ignoreRegex']\n\t\t\t\t\t\t,dataview\n\t\t\t\t\t);\n                }\n                break;\n\t\t\t\t\n\t\t\t\t//autocomplete filter for jlocator\n\t\t\t\tcase 'autocomplete':{\t\n\t\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.autocompleteFilter(\n\t\t\t\t\t\tstatus.data['latitude']\n\t\t\t\t\t\t, status.data['longitude']\n\t\t\t\t\t\t, status.data['name']\n\t\t\t\t\t\t, dataview\n\t\t\t\t\t\t, status.data['radius']\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\t\n\t/**\n\t* update collection dataview: filtering\n\t* @param {Object} self - jplist controller 'this' object\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {Array.<jQuery.fn.jplist.models.Status>} statuses\n\t*/\n\tvar updateDataviewFilter = function(self, collection, statuses){\n\t\n\t\tvar filterStatuses\n\t\t\t,status;\n\t\t\n\t\t//get filter statuses\t\t\n\t\tfilterStatuses = jQuery.fn.jplist.services.Status.getStatusesByAction('filter', statuses);\n\t\t\n\t\tif(filterStatuses.length > 0){\n\n\t\t\tfor(var i=0; i<filterStatuses.length; i++){\n\n\t\t\t\t//get status\n\t\t\t\tstatus = filterStatuses[i];\n\n\t\t\t\t//modify dataview\n\t\t\t\tmodifyDataviewCallback(collection, status);\n\t\t\t}\n\t\t\t\n\t\t\t//trigger filter event\n\t\t\tself.$jplistBox.trigger(self.options.filter_event, [statuses, collection]);\n\t\t}\n\t};\n\t\n\t/**\n\t* update collection dataview: pagination\n\t* @param {Object} self - jplist controller 'this' object\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {Array.<jQuery.fn.jplist.models.Status>} statuses\n\t*/\n\tvar updateDataviewPaging = function(self, collection, statuses){\n\t\t\n\t\tvar actionStatuses\n\t\t\t,paging = null\n\t\t\t,status\n\t\t\t,currentPage;\n\t\t\n\t\t//get list of pagination statuses\n\t\tactionStatuses = jQuery.fn.jplist.services.Status.getStatusesByAction('paging', statuses);\n\t\t\n\t\tif(actionStatuses.length > 0){\n\t\t\n\t\t\tfor(var i=0; i<actionStatuses.length; i++){\n\t\t\t\n\t\t\t\t//get pagination status\n\t\t\t\tstatus = actionStatuses[i];\n\t\t\t\t\n\t\t\t\t//init current page\n\t\t\t\tif(!status.data.currentPage){\n\t\t\t\t\tcurrentPage = 0;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcurrentPage = status.data.currentPage;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//create paging object\n\t\t\t\tpaging = new jQuery.fn.jplist.actions.Pagination(currentPage, status.data.number, collection.dataview.length);\n\t\t\t\t\n\t\t\t\t//add paging object to the paging status\n\t\t\t\tactionStatuses[i].data.paging = paging;\n\n\t\t\t\t//update dataview\n\t\t\t\tcollection.dataview = jQuery.fn.jplist.actions.Filters.pagerFilter(paging, collection.dataview);\n\t\t\t}\n\t\t\t\n\t\t\t//trigger pagination event\n\t\t\tself.$jplistBox.trigger(self.options.pagination_event, [statuses, collection]);\n\t\t}\n\t\t\n\t};\n\t\n\t/**\n\t* update collection dataview:\n\t* start from dataview reset (dataview = dataitems)\n\t* sort databiew, filter it and apply pagination\n\t* then create html and animate to top if needed\n\t* @param {Object} self - jplist controller 'this' object\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {Array.<jQuery.fn.jplist.models.Status>} statuses\n\t*/\n\tvar updateDataview = function(self, collection, statuses){\n\n\t\t//reset dataview\n\t\tcollection.resetDataview();\n\n\t\t//sorting\n\t\tupdateDataviewSort(self, collection, statuses);\n\n\t\t//filtering\n\t\tupdateDataviewFilter(self, collection, statuses);\n\t\t\t\t\n\t\t//pagination\n\t\tupdateDataviewPaging(self, collection, statuses);\n\t\t\t\t\n\t\t//build html\t\t\t\t\t\t\t\n\t\tbuildCollectionHtml(self, collection, statuses);\n\t\t\n\t\t//animate to top\n\t\tanimateToTop(self);\n\t};\n\t\t\n\t/**\n\t* init events\n\t* @param {Object} self - jplist controller 'this' object\n\t*/\n\tvar initHtmlEvents = function(self){\n\t\t\n\t\t//on ask event\n\t\tself.$jplistBox.on(self.options.ask_event, function(event, statuses){\n\t\t\t\n\t\t\t//save statuses in cookies\n\t\t\tif(self.options.cookies){\n\t\t\t\tjQuery.fn.jplist.services.Cookies.saveCookies(statuses, self.options.cookie_name, self.options.expiration);\n\t\t\t}\n\t\t\t\n\t\t\tif(self.collection){\n\t\t\t\t\n\t\t\t\t//update dataview\n\t\t\t\tupdateDataview(self, self.collection, statuses);\n\t\t\t}\t\n\n\t\t\tif(self.options.deep_linking){\n\t\t\t\t\n\t\t\t\t//if deep linking is enabled -> change url by statuses\n\t\t\t\tself.$jplistBox.trigger(self.options.change_url_deep_links_event, []);\n\t\t\t}\n\t\t});\t\t\n\t};\n\t\n\t/**\n\t* add ittems to collection\n\t* @param {Object} self - jplist controller 'this' object\n\t* @param {jQuery.fn.jplist.services.Collection} collection\n\t* @param {jQueryObject} $items\n\t* @param {number} counter\n\t*/\n\tvar addItemsToCollection = function(self, collection, $items, counter){\n\t\t\n\t\tvar $item;\n\t\t\n\t\tfor(; counter<$items.length; counter++){\n\t\t\t\n\t\t\t//get item\n\t\t\t$item = $items.eq(counter);\n\n\t\t\t//add item to the array\n\t\t\tcollection.addDataItem($item, self.panel.paths, counter);\n\t\t\t\n\t\t\t//setTimeout is added to improve browser performance\n\t\t\t/* jshint -W083 */\n\t\t\tif(counter + 1 < $items.length && counter % 50 === 0){\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\taddItemsToCollection(self, collection, $items, counter);\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t\t/* jshint +W083 */\n\t\t}\t\t\n\t};\n\t\n\t/**\n\t* create collection of dataitems\n\t* @param {Object} self - jplist controller 'this' object\n\t* @return {jQuery.fn.jplist.services.Collection}\n\t*/\n\tvar getCollection = function(self){\n\t\n\t\tvar collection\n\t\t\t,$items;\n\t\t\n\t\t//create new collection\n\t\tcollection = new jQuery.fn.jplist.services.Collection(self.$jplistBox, self.options);\n\t\t\t\t\t\n\t\t//get items inside items box\n\t\t$items = self.$itemsBox.find(self.options.item_path).detach();\n\t\t\n\t\t//add ittems to collection\n\t\taddItemsToCollection(self, collection, $items, 0);\n\n\t\t//update dataview\n\t\tcollection.resetDataview();\n\t\t\n\t\treturn collection;\n\t};\n\t\n\t/**\n\t* init data source\n\t* @param {Object} self - jplist controller 'this' object\n\t*/\n\tvar initDataSource = function(self){\n\n\t\t//if data source option doesn't exist -> it should be 'html'\n\t\tif(!self.options.dataSource){\n\t\t\tself.options.dataSource = 'html';\n\t\t}\n\t\t\n\t\t//check data source option:\n\t\tswitch(self.options.dataSource.type){\n\t\t\n\t\t\t//html data source (dom)\n\t\t\tcase 'html':{\t\t\t\t\n\t\t\t\t\n\t\t\t\t//init collection\n\t\t\t\tself.collection = getCollection(self);\n\t\t\t\t\n\t\t\t\t//init events\n\t\t\t\tinitHtmlEvents(self);\n\n                //trigger collection ready event\n\t\t\t    self.$jplistBox.trigger(self.options.collection_ready_event, [self.collection]);\n\t\t\t}\n\t\t\tbreak;\n\t\t\t\n\t\t\t//server side data source\n\t\t\tcase 'server':{\n\t\t\t\t\n\t\t\t\t//init server object\n\t\t\t\tself.server = new jQuery.fn.jplist.controller.Server(self.$jplistBox, self.$itemsBox, self.$noResults, self.options);\n\t\t\t}\n\t\t\tbreak;\n\t\t\t\n\t\t\t//data source from js function\n\t\t\tcase 'jsFunction':{\n\t\t\t\t\n\t\t\t\tif($.isFunction(self.options.dataSource.jsFunction.jsFunctionName)){\n\t\t\t\t\n\t\t\t\t\t//init data source from js function\n\t\t\t\t\tself.dataSourceJSFunction = new jQuery.fn.jplist.controller.dataSourceJSFunction(self.$jplistBox, self.$itemsBox, self.$noResults, self.options);\n\t\t\t\t}\n\t\t\t}\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\t\n\t};\n\t\t\n\t/**\n\t* controller constructor\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {Object} options - jplist user options\n\t* @return {Object} - controller + this\t\n\t* @constructor \n\t*/\n\tvar Init = function($jplistBox, options){\n\t\n\t\tvar cookiesStatuses\n\t\t\t,self = {\n\t\t\t\toptions: options\n\t\t\t\t,$jplistBox: $jplistBox\n\t\t\t\t,$itemsBox: $jplistBox.find(options.items_box).eq(0)\n\t\t\t\t,$noResults: null\n\t\t\t\t\n\t\t\t\t,panel: null\n\t\t\t\t,collection: null\n\t\t\t\t,events: null\t\t\t\t\n\t\t\t\t,server: null\n\t\t\t\t,dataSourceJSFunction: null\n\t\t};\t\n\t\t\n\t\t//init vars\n\t\tself.events = new jQuery.fn.jplist.controller.Events(self.$jplistBox, self.options);\n\t\tself.panel = new jQuery.fn.jplist.view.Panel(self.$jplistBox, self.options, self.events);\n\t\tself.$noResults = $jplistBox.find(self.options.no_results);\n\t\t\n\t\t//init data source\n\t\tinitDataSource(self);\t\n\n\t\t//if deep links options is enabled\n\t\tif(self.options.deep_linking){\n\t\t\t\n\t\t\t//try restore panel state from query string\n\t\t\tself.$jplistBox.trigger(self.options.set_deep_links_event, []);\n\t\t}\n\t\telse{\t\t\n\t\t\t//check cookies\n\t\t\tif(self.options.cookies){\n\t\t\t\t\n\t\t\t\t//restore statuses from cookies\n\t\t\t\tcookiesStatuses = jQuery.fn.jplist.services.Cookies.restoreCookies(self.options.cookie_name);\n\t\t\t\t\n\t\t\t\t//send redraw event\n\t\t\t\tif(cookiesStatuses.length > 0){\n\t\t\t\t\tself.$jplistBox.trigger(self.options.restore_event, [cookiesStatuses]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\t//send panel redraw event\n\t\t\t\t\tself.$jplistBox.trigger(self.options.force_ask_event, [true]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tself.$jplistBox.trigger(self.options.force_ask_event, [true]);\n\t\t\t}\n\t\t}\t\t\n\t\t\t\t\n\t\treturn $.extend(this, self);\n\t};\n\t\n\t/**\n\t* Controller\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {Object} options - jplist user options\n\t* @return {Object} - controller\n\t* @constructor \n    * @class Controller - the main controller class\n    * @memberOf jQuery.fn.jplist.controller\n\t* @property {Object} options - user options\n\t* @property {jQueryElement} $jplistBox - jplist root element\n\t* @property {jQueryElement} $itemsBox - jplist items container\n\t* @property {jQueryElement} $noResults - jplist 'no results' element\n\t* @property {jQuery.fn.jplist.view.Panel} panel - panel object\n\t* @property {jQuery.fn.jplist.services.Collection} collection - collection object\n\t* @property {jQuery.fn.jplist.controller.Server} server - server object\n\t* @property {jQuery.fn.jplist.controller.dataSourceJSFunction} dataSourceJSFunction - dataSourceJSFunction object\n\t*/\n\tjQuery.fn.jplist.controller.Controller = function($jplistBox, options){\n\t\t\t\t\n\t\t//call constructor\n\t\treturn new Init($jplistBox, options);\n\t};\n})(jQuery);\n\n"],"sourceRoot":"/source/"}