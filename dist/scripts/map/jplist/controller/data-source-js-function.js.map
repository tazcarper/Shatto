{"version":3,"sources":["map/jplist/controller/data-source-js-function.js"],"names":[],"mappings":"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","file":"map/jplist/controller/data-source-js-function.js","sourcesContent":["(function($){\n\t'use strict';\n\t\n\t/**\n\t* build result html\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {string} html\n\t* @param {Array.<jQuery.fn.jplist.models.Status>} statuses\n\t*/\n\tvar buildHtml = function(self, html, statuses){\n\t\t\n\t\t//update container html\n\t\tself.$itemsBox.html(html);\n\t\t\n\t\t//send readraw event\t\t\n\t\tself.$jplistBox.trigger(self.options.answer_event, [statuses, html]);\n\t\t\n\t\t//no results found\n\t\tif(!html || $.trim(html) === ''){\n\t\t\tself.$noResults.removeClass('jplist-hidden');\n\t\t\tself.$itemsBox.addClass('jplist-hidden');\n\t\t}\n\t\telse{\n\t\t\tself.$noResults.addClass('jplist-hidden');\n\t\t\tself.$itemsBox.removeClass('jplist-hidden');\n\t\t}\n\t\t\n\t\t//redraw callback\n\t\tif($.isFunction(self.options.redraw_callback)){\n\t\t\tself.options.redraw_callback();\n\t\t}\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {Object} self - jplist controller 'this' object\n\t*/\n\tvar initEvents = function(self){\n\t\t\n\t\t//on ask event\n\t\tself.$jplistBox.on(self.options.ask_event, function(event, statuses){\n\t\t\t\t\t\n\t\t\t//save statuses in cookies\n\t\t\tif(self.options.cookies){\n\t\t\t\tjQuery.fn.jplist.services.Cookies.saveCookies(statuses, self.options.cookie_name, self.options.expiration);\n\t\t\t}\n\t\t\t\n\t\t\tif($.isFunction(self.options.dataSource.jsFunction.jsFunctionName)){\n\t\t\t\t\n\t\t\t\t//empty html\n\t\t\t\tself.$itemsBox.html('');\n\t\t\t\t\n\t\t\t\t//show preloader\n\t\t\t\tif(self.$preloader){\n\t\t\t\t\tself.$preloader.show(0);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//call to js function\n\t\t\t\tself.options.dataSource.jsFunction.jsFunctionName(statuses, self.options, function(html){\n\t\t\t\t\t\n\t\t\t\t\t//hide preloader\n\t\t\t\t\tif(self.$preloader){\n\t\t\t\t\t\tself.$preloader.hide(0);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//build result html\n\t\t\t\t\tbuildHtml(self, html, statuses);\t\t\n\n\t\t\t\t\tif(self.options.deep_linking){\n\t\t\t\t\t\t\n\t\t\t\t\t\t//if deep linking is enabled -> change url by statuses\n\t\t\t\t\t\tself.$jplistBox.trigger(self.options.change_url_deep_links_event, []);\n\t\t\t\t\t}\n\n                    //trigger collection ready event\n\t\t\t        //self.$jplistBox.trigger(self.options.collection_ready_event, [html]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\t\t\n\t};\n\t\n\t/**\n\t* server constructor\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {jQueryObject} $itemsBox - jplist items container\n\t* @param {jQueryObject} $noResults - jplist no results element\n\t* @param {Object} options - jplist user options\n\t* @return {Object} - server + this\t\n\t* @constructor \n\t*/\n\tvar Init = function($jplistBox, $itemsBox, $noResults, options){\n\t\n\t\tvar self = {\n\t\t\toptions: options\n\t\t\t,$jplistBox: $jplistBox\n\t\t\t,$itemsBox: $itemsBox\n\t\t\t,$noResults: $noResults\n\t\t\t,$preloader: null\n\t\t};\t\n\t\t\n\t\t//init preloader\n\t\tif(self.options.dataSource.jsFunction.preloaderPath){\n\t\t\tself.$preloader = self.$jplistBox.find(self.options.dataSource.jsFunction.preloaderPath);\n\t\t}\n\t\t\n\t\t//init events\n\t\tinitEvents(self);\n\t\t\t\t\n\t\treturn $.extend(this, self);\n\t};\n\t\n\t/**\n\t* Data source js function\n\t* @param {jQueryObject} $jplistBox - jplist root element\n\t* @param {jQueryObject} $itemsBox - jplist items container\n\t* @param {jQueryObject} $noResults - jplist no results element\n\t* @param {Object} options - jplist user options\n\t* @return {Object} - server\n\t* @constructor \n\t*\n    * @class JavaScript function as jplist data source (instead of HTML/DOM)\n    * @memberOf jQuery.fn.jplist\n\t* @property {Object} options - user options\n\t* @property {jQueryObject} $jplistBox - jplist root element\n\t* @property {jQueryObject} $itemsBox - jplist items container\n\t* @property {jQueryObject} $noResults - jplist no results element\n\t* @property {jQueryObject} $preloader - jplist preloader element\n\t*/\n\tjQuery.fn.jplist.controller.dataSourceJSFunction = function($jplistBox, $itemsBox, $noResults, options){\n\t\t\t\t\n\t\t//call constructor\n\t\treturn new Init($jplistBox, $itemsBox, $noResults, options);\n\t};\n})(jQuery);"],"sourceRoot":"/source/"}