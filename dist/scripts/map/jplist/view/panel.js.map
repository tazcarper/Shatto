{"version":3,"sources":["map/jplist/view/panel.js"],"names":[],"mappings":"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","file":"map/jplist/view/panel.js","sourcesContent":["(function($){\n\t'use strict';\n\t\n\t/**\n\t* get panel controls\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {jQueryObject} $controls\n\t* @return {Array.<jQuery.fn.jplist.view.PanelControl>}\n\t*/\n\tvar getPanelControls = function(self, $controls){\n\t\n\t\tvar $control\n\t\t\t,control\n\t\t\t,controls = [];\n\t\t\n\t\tfor(var i=0; i<$controls.length; i++){\n\t\t\n\t\t\t//get jquery control\n\t\t\t$control = $controls.eq(i);\n\t\t\t\n\t\t\t//create new control\n\t\t\tcontrol = new jQuery.fn.jplist.view.PanelControl(self.$jplistBox, self.options, $control, self.events);\n\t\t\t\n\t\t\t//add to the list\n\t\t\tcontrols.push(control);\n\t\t}\n\t\t\n\t\treturn controls;\n\t};\n\t\n\t/**\n\t* set controls statuses by deep link params\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {Array.<Object>} params - array of params {controlName: '...', propName: '...', propValue: '...'}\n\t* @param {Array.<jQuery.fn.jplist.view.PanelControl>} controls\n\t*/\n\tvar setDeepLinks = function(self, params, controls){\n\t\t\n\t\tvar param\n\t\t\t,controlsWithSameName\n\t\t\t,control\n\t\t\t,status\n\t\t\t,newStatuses = []\n\t\t\t,oldStatuses\n\t\t\t,isDefault = false\n\t\t\t,i;\n\t\t\n\t\tfor(i=0; i<params.length; i++){\n\t\t\t\n\t\t\t//get param\n\t\t\tparam = params[i];\n\t\t\t\n\t\t\t//get all controls with the given name\n\t\t\tcontrolsWithSameName = jQuery.fn.jplist.services.Panel.findControlsByName(controls, param.controlName);\n\t\t\t\n\t\t\tfor(var j=0; j<controlsWithSameName.length; j++){\n\t\t\t\t\n\t\t\t\t//get control\n\t\t\t\tcontrol = controlsWithSameName[j];\n\t\t\t\t\n\t\t\t\t//set key-value pair\n\t\t\t\tstatus = control.getStatusByDeepLink(param.propName, param.propValue);\n\t\t\t\t\n\t\t\t\tif(status){\n\t\t\t\t\tnewStatuses.push(status);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\t\n\t\t//get current statuses\n\t\toldStatuses = jQuery.fn.jplist.services.Panel.getStatuses(self.controls, isDefault);\n\t\t\t\t\n\t\tfor(i=0; i<newStatuses.length; i++){\t\t\t\n\t\t\tjQuery.fn.jplist.services.Panel.mergeWithStatus(oldStatuses, newStatuses[i]);\n\t\t}\n\t\t\n\t\t//send ask event\n\t\tself.$jplistBox.trigger(self.options.ask_event, [oldStatuses]);\n\t};\n\t\n\t/**\n\t* get params from deep link url\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {string} hash - for example: paging-number=5~~sort-path~type~order=.title~text~asc~~paging-currentPage=1\n\t* @return {Array.<Object>} array of params {controlName: '...', propName: '...', propValue: '...'}\n\t*/\n\tvar getParamsFromDeepLinkUrl = function(self, hash){\n\t\t\n\t\tvar sections = []\n\t\t\t,section\n\t\t\t,params = []\n\t\t\t,param\n\t\t\t,pairSections\n\t\t\t,keySections\n\t\t\t,key\n\t\t\t,value;\n\t\t\n\t\tif(self.options.deep_linking && $.trim(hash) !== ''){\n\t\t\t\n\t\t\t//get sections\n\t\t\tsections = hash.split('~~');\n\t\t\t\n\t\t\tfor(var i=0; i<sections.length; i++){\n\t\t\t\t\n\t\t\t\t//get section\n\t\t\t\tsection = sections[i];\n\t\t\t\t\n\t\t\t\t//get pair: key + value\n\t\t\t\tpairSections = section.split('=');\n\t\t\t\t\n\t\t\t\tif(pairSections.length === 2){\n\t\t\t\t\t\n\t\t\t\t\t//get pair\n\t\t\t\t\tkey = pairSections[0];\n\t\t\t\t\tvalue = pairSections[1];\n\t\t\t\t\t\n\t\t\t\t\t//get key sections\n\t\t\t\t\tkeySections = key.split('--');\n\t\t\t\t\t\n\t\t\t\t\tif(keySections.length === 2){\n\t\t\t\t\t\t\n\t\t\t\t\t\tparam = {\n\t\t\t\t\t\t\tcontrolName: keySections[0]\n\t\t\t\t\t\t\t,propName: keySections[1]\n\t\t\t\t\t\t\t,propValue: value\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tparams.push(param);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn params;\n\t};\n\t\n\t/**\n\t* get deep links url from controls\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {Array.<jQuery.fn.jplist.view.PanelControl>} controls\n\t* @return {string} url\n\t*/\n\tvar getDeepLinksUrl = function(self, controls){\n\t\n\t\tvar control\n\t\t\t,url = ''\n\t\t\t,deepLinksArr = []\n\t\t\t,deepLink = '';\n\t\t\n\t\tfor(var i=0; i<controls.length; i++){\n\t\t\t\n\t\t\t//get control\n\t\t\tcontrol = controls[i];\n\t\t\t\n\t\t\t//get deep link\n\t\t\tdeepLink = $.trim(control.getDeepLink());\n\t\t\t\n\t\t\t//add it to the list\n\t\t\tif((deepLink !== '') && ($.inArray(deepLink, deepLinksArr) === -1)){\n\t\t\t\tdeepLinksArr.push(deepLink);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//init deep links url\n\t\turl = deepLinksArr.join('~~');\n\t\t\n\t\treturn url;\n\t};\n\t\n\t/**\n\t* set sticky position\n\t* @param {jQueryObject} $stickyEl - sticky element on the panel\n\t*/\n\tvar setStickyPosition = function($stickyEl){\n\t\t\n\t\tvar scrollTop = $(window).scrollTop()\n\t\t\t,top;\n\t\t\n\t\t//get top value\n\t\ttop = Number($stickyEl.data('top'));\n\t\t\n\t\tif(!isNaN(top)){\n\t\t\n\t\t\tif (scrollTop > top){ \n\t\t\t\t$stickyEl.addClass('jplist-sticky');\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$stickyEl.removeClass('jplist-sticky');\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t* init sticky elements\n\t* @param {jQueryObject} $sticky - sticky elements on the panel\n\t*/\n\tvar initSticky = function(self, $sticky){\n\t\t\t\n\t\t$sticky.each(function(){\n\t\t\t\n\t\t\tvar $stickyEl = $(this)\n\t\t\t\t,top = $stickyEl.offset().top;\n\t\t\t\n\t\t\t//save top value\n\t\t\t$stickyEl.data('top', top);\n\t\t\t\n\t\t\t//set position first time\n\t\t\tsetStickyPosition($stickyEl);\n\t\t});\n\t\t\n\t\t$(window).scroll(function(){\n\t\t\t\n\t\t\t$sticky.each(function(){\n\t\t\t\t\t\t\t\n\t\t\t\t//set position first time\n\t\t\t\tsetStickyPosition( $(this));\n\t\t\t});\n\t\t});\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {Object} self - jplist panel 'this' object\n\t*/\n\tvar initEvents = function(self){\n\t\t\n\t\tvar control\n\t\t\t,NOT_RESTORED_FROM_COOKIES = false\n\t\t\t,RESTORED_FROM_COOKIES = true;\n\t\t\n\t\t//init events for every control in the panel\n\t\tfor(var i=0; i<self.controls.length; i++){\n\t\t\n\t\t\t//get control type\n\t\t\tcontrol = self.controls[i];\n\t\t\t\n\t\t\t//init control events\n\t\t\tcontrol.initEvents();\t\t\t\n\t\t}\n\t\t\n\t\t//event from controller to panel after html rebuild\n\t\tself.$jplistBox.on(self.options.answer_event, function(event, statusesArray, collection){\n\t\t\t\n\t\t\t//set statuses\n\t\t\tjQuery.fn.jplist.services.Panel.setStatuses(self.controls, statusesArray, NOT_RESTORED_FROM_COOKIES);\n\t\t});\n\t\t\n\t\t//event to panel -> panel sends ask event\n\t\tself.$jplistBox.on(self.options.force_ask_event, function(event, isDefault){\n\t\t\n\t\t\tvar statuses;\n\t\t\t\n\t\t\t//get current statuses\n\t\t\tstatuses = jQuery.fn.jplist.services.Panel.getStatuses(self.controls, isDefault);\n\t\t\t\n\t\t\t//trigger ask event\n\t\t\tself.$jplistBox.trigger(self.options.ask_event, [statuses]);\n\t\t});\t\t\n\t\t\n\t\t//event to panel -> restore panel from event data (statuses array)\n\t\tself.$jplistBox.on(self.options.restore_event, function(event, statusesArray){\n\t\t\t\n\t\t\t//restore drop downs\n\t\t\tjQuery.fn.jplist.services.Panel.setStatuses(self.controls, statusesArray, RESTORED_FROM_COOKIES);\n\t\t\t\n\t\t\t//ask event\n\t\t\tself.$jplistBox.trigger(self.options.ask_event, [statusesArray]);\n\t\t});\t\n\t\t\n\t\t//event to panel -> get all statuses and merge them with the given status, then send ask event\n\t\tself.$jplistBox.on(self.options.status_event, function(event, status){\t\t\t\n\t\t\t\n\t\t\tvar statuses\n\t\t\t\t,isDefault = false;\n\t\t\t\t\t\t\n\t\t\t//get current statuses\n\t\t\tstatuses = jQuery.fn.jplist.services.Panel.getStatuses(self.controls, isDefault);\n\t\t\t\n\t\t\t//merge\n\t\t\tstatuses = jQuery.fn.jplist.services.Panel.mergeWithStatus(statuses, status);\n\t\t\t\n\t\t\t//send ask event\n\t\t\tself.$jplistBox.trigger(self.options.ask_event, [statuses]);\n\t\t});\n\t\t\n\t\t//event to panel -> get deep links from all panel controls\n\t\tself.$jplistBox.on(self.options.change_url_deep_links_event, function(event){\t\n\t\t\n\t\t\tvar deepLinkUrl = '';\n\t\t\t\n\t\t\tif(self.options.deep_linking){\n\t\t\t\t\n\t\t\t\t//get deep link url\n\t\t\t\tdeepLinkUrl = getDeepLinksUrl(self, self.controls);\n\t\t\t\t\n\t\t\t\t//set new hash\n\t\t\t\t//window.location.hash = deepLinkUrl;\n\t\t\t\tjQuery.fn.jplist.services.Helper.replaceHash(deepLinkUrl);\n\t\t\t}\n\t\t});\n\t\t\n\t\t//event to panel -> set panel controls statuses by their deep links\n\t\tself.$jplistBox.on(self.options.set_deep_links_event, function(event){\t\n\t\t\t\n\t\t\tvar hash = $.trim(window.location.hash.replace('#', ''))\n\t\t\t\t,params;\n\t\t\t\n\t\t\t//set deep links\n\t\t\tparams = getParamsFromDeepLinkUrl(self, hash);\n\t\t\t\n\t\t\tif(params.length <= 0){\n\t\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tself.$jplistBox.trigger(self.options.force_ask_event, [true]);\n\t\t\t}\n\t\t\telse{\t\t\t\t\n\t\t\t\tsetDeepLinks(self, params, self.controls);\t\t\t\t\n\t\t\t}\t\t\t\n\t\t});\n\t\t\n\t\t/**\n\t\t* bind rebuild panel event\n\t\t* @param {Object} event\n\t\t* @param {Function} callback\n\t\t*/\n\t\tself.$jplistBox.on(self.options.rebuild_panel_event, function(event, callback){\n\t\t\t\n\t\t\t//init panel controls\n\t\t\tself.$controls = self.$panel.find('[data-control-type]');\t\t\t\n\t\t\tself.controls = getPanelControls(self, self.$controls);\n\t\t\t\n\t\t\t//get panel paths\n\t\t\tself.paths = jQuery.fn.jplist.services.Panel.getPaths(self.controls);\n\t\t\t\n\t\t\t//init events for every control in the panel\n\t\t\tfor(var i=0; i<self.controls.length; i++){\n\t\t\t\n\t\t\t\t//get control type\n\t\t\t\tcontrol = self.controls[i];\n\t\t\t\t\n\t\t\t\t//init control events\n\t\t\t\tcontrol.initEvents();\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif($.isFunction(callback)){\n\t\t\t\tcallback(self.$controls, self.controls, self.paths);\n\t\t\t}\n\t\t});\t\t\n\t};\n\t\n\t/**\n\t* panel constructor\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {Object} options - jplist options\n\t* @param {jQuery.fn.jplist.controller.Events} events\n\t* @return {Object} - panel + this\n\t* @constructor \n\t*/\n\tvar Init = function($jplistBox, options, events){\n\t\n\t\tvar self = {\n\t\t\toptions: options\t//user options\t\n\t\t\t,$jplistBox: $jplistBox //jplist container\n\t\t\t,$panel: $jplistBox.find(options.panel_path) //panel jquery element\t\t\n\t\t\t,$controls: null //jquery controls\n\t\t\t,$sticky: null\n\t\t\t,events: events\n\t\t\t\t\t\n\t\t\t,paths: [] //all paths\t\n\t\t\t,controls: [] //panel controls\n\t\t};\t\t\t\n\n\t\t//init panel controls\n\t\tself.$controls = self.$panel.find('[data-control-type]');\t\t\t\n\t\tself.controls = getPanelControls(self, self.$controls);\n\t\t\n\t\t//get panel paths\n\t\tself.paths = jQuery.fn.jplist.services.Panel.getPaths(self.controls);\n\t\t\n\t\t//find sticky elements\n\t\tself.$sticky = self.$jplistBox.find('[data-sticky=\"true\"]');\n\t\t\n\t\t//init sticky\n\t\tif(self.$sticky.length > 0){\n\t\t\tinitSticky(self, self.$sticky);\n\t\t}\n\t\t\n\t\t//init events\n\t\tinitEvents(self);\n\t\t\n\t\treturn $.extend(this, self);\n\t};\n\t\n\t/**\n\t* Panel constructor\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {Object} options - jplist options\n\t* @param {jQuery.fn.jplist.controller.Events} events\n\t* @constructor \n    * @class Panel class - representation of jplist panel object\n    * @memberOf jQuery.fn.jplist\n\t*\n\t* @property {Object} options - user options\t\n\t* @property {jQueryObject} $jplistBox - jplist root element\n\t* @property {jQueryObject} $panel - panel jquery element\n\t* @property {jQueryObject} $sticky - sticky elements on the panel\n\t* @property {jQuery.fn.jplist.controller.Events} events\n\t* @property {jQueryObject} $controls - jquery controls list\n\t* @property {Array.<jQuery.fn.jplist.models.Path>} paths - all controls paths\n\t* @property {Array.<jQuery.fn.jplist.view.PanelControl>} paths - all controls\n\t*/\n\tjQuery.fn.jplist.view.Panel = function($jplistBox, options, events){\n\t\n\t\tvar self;\t\n\n\t\t//call constructor\n\t\tself = new Init($jplistBox, options, events);\n\t\t\n\t\t//properties\n\t\tthis.paths = self['paths'];\n\t\tthis.controls = self['controls'];\n\t};\n})(jQuery);"],"sourceRoot":"/source/"}