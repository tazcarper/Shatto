{"version":3,"sources":["map/jplist/view/panel.js"],"names":[],"mappings":"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","file":"map/jplist/view/panel.js","sourcesContent":["(function($){\n\t'use strict';\n\t\n\t/**\n\t* get panel controls\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {jQueryObject} $controls\n\t* @return {Array.<jQuery.fn.jplist.view.PanelControl>}\n\t*/\n\tvar getPanelControls = function(self, $controls){\n\t\n\t\tvar $control\n\t\t\t,control\n\t\t\t,controls = [];\n\t\t\n\t\tfor(var i=0; i<$controls.length; i++){\n\t\t\n\t\t\t//get jquery control\n\t\t\t$control = $controls.eq(i);\n\t\t\t\n\t\t\t//create new control\n\t\t\tcontrol = new jQuery.fn.jplist.view.PanelControl(self.$jplistBox, self.options, $control, self.events);\n\t\t\t\n\t\t\t//add to the list\n\t\t\tcontrols.push(control);\n\t\t}\n\t\t\n\t\treturn controls;\n\t};\n\t\n\t/**\n\t* set controls statuses by deep link params\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {Array.<Object>} params - array of params {controlName: '...', propName: '...', propValue: '...'}\n\t* @param {Array.<jQuery.fn.jplist.view.PanelControl>} controls\n\t*/\n\tvar setDeepLinks = function(self, params, controls){\n\t\t\n\t\tvar param\n\t\t\t,controlsWithSameName\n\t\t\t,control\n\t\t\t,status\n\t\t\t,newStatuses = []\n\t\t\t,oldStatuses\n\t\t\t,isDefault = false\n\t\t\t,i;\n\t\t\n\t\tfor(i=0; i<params.length; i++){\n\t\t\t\n\t\t\t//get param\n\t\t\tparam = params[i];\n\t\t\t\n\t\t\t//get all controls with the given name\n\t\t\tcontrolsWithSameName = jQuery.fn.jplist.services.Panel.findControlsByName(controls, param.controlName);\n\t\t\t\n\t\t\tfor(var j=0; j<controlsWithSameName.length; j++){\n\t\t\t\t\n\t\t\t\t//get control\n\t\t\t\tcontrol = controlsWithSameName[j];\n\t\t\t\t\n\t\t\t\t//set key-value pair\n\t\t\t\tstatus = control.getStatusByDeepLink(param.propName, param.propValue);\n\t\t\t\t\n\t\t\t\tif(status){\n\t\t\t\t\tnewStatuses.push(status);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\t\n\t\t//get current statuses\n\t\toldStatuses = jQuery.fn.jplist.services.Panel.getStatuses(self.controls, isDefault);\n\t\t\t\t\n\t\tfor(i=0; i<newStatuses.length; i++){\t\t\t\n\t\t\tjQuery.fn.jplist.services.Panel.mergeWithStatus(oldStatuses, newStatuses[i]);\n\t\t}\n\t\t\n\t\t//send ask event\n\t\tself.$jplistBox.trigger(self.options.ask_event, [oldStatuses]);\n\t};\n\t\n\t/**\n\t* get params from deep link url\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {string} hash - for example: paging-number=5~~sort-path~type~order=.title~text~asc~~paging-currentPage=1\n\t* @return {Array.<Object>} array of params {controlName: '...', propName: '...', propValue: '...'}\n\t*/\n\tvar getParamsFromDeepLinkUrl = function(self, hash){\n\t\t\n\t\tvar sections = []\n\t\t\t,section\n\t\t\t,params = []\n\t\t\t,param\n\t\t\t,pairSections\n\t\t\t,keySections\n\t\t\t,key\n\t\t\t,value;\n\t\t\n\t\tif(self.options.deep_linking && $.trim(hash) !== ''){\n\t\t\t\n\t\t\t//get sections\n\t\t\tsections = hash.split('~~');\n\t\t\t\n\t\t\tfor(var i=0; i<sections.length; i++){\n\t\t\t\t\n\t\t\t\t//get section\n\t\t\t\tsection = sections[i];\n\t\t\t\t\n\t\t\t\t//get pair: key + value\n\t\t\t\tpairSections = section.split('=');\n\t\t\t\t\n\t\t\t\tif(pairSections.length === 2){\n\t\t\t\t\t\n\t\t\t\t\t//get pair\n\t\t\t\t\tkey = pairSections[0];\n\t\t\t\t\tvalue = pairSections[1];\n\t\t\t\t\t\n\t\t\t\t\t//get key sections\n\t\t\t\t\tkeySections = key.split('--');\n\t\t\t\t\t\n\t\t\t\t\tif(keySections.length === 2){\n\t\t\t\t\t\t\n\t\t\t\t\t\tparam = {\n\t\t\t\t\t\t\tcontrolName: keySections[0]\n\t\t\t\t\t\t\t,propName: keySections[1]\n\t\t\t\t\t\t\t,propValue: value\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tparams.push(param);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn params;\n\t};\n\t\n\t/**\n\t* get deep links url from controls\n\t* @param {Object} self - jplist panel 'this' object\n\t* @param {Array.<jQuery.fn.jplist.view.PanelControl>} controls\n\t* @return {string} url\n\t*/\n\tvar getDeepLinksUrl = function(self, controls){\n\t\n\t\tvar control\n\t\t\t,url = ''\n\t\t\t,deepLinksArr = []\n\t\t\t,deepLink = '';\n\t\t\n\t\tfor(var i=0; i<controls.length; i++){\n\t\t\t\n\t\t\t//get control\n\t\t\tcontrol = controls[i];\n\t\t\t\n\t\t\t//get deep link\n\t\t\tdeepLink = $.trim(control.getDeepLink());\n\t\t\t\n\t\t\t//add it to the list\n\t\t\tif((deepLink !== '') && ($.inArray(deepLink, deepLinksArr) === -1)){\n\t\t\t\tdeepLinksArr.push(deepLink);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//init deep links url\n\t\turl = deepLinksArr.join('~~');\n\t\t\n\t\treturn url;\n\t};\n\t\n\t/**\n\t* set sticky position\n\t* @param {jQueryObject} $stickyEl - sticky element on the panel\n\t*/\n\tvar setStickyPosition = function($stickyEl){\n\t\t\n\t\tvar scrollTop = $(window).scrollTop()\n\t\t\t,top;\n\t\t\n\t\t//get top value\n\t\ttop = Number($stickyEl.data('top'));\n\t\t\n\t\tif(!isNaN(top)){\n\t\t\n\t\t\tif (scrollTop > top){ \n\t\t\t\t$stickyEl.addClass('jplist-sticky');\n\t\t\t}\n\t\t\telse{\n\t\t\t\t$stickyEl.removeClass('jplist-sticky');\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t* init sticky elements\n\t* @param {jQueryObject} $sticky - sticky elements on the panel\n\t*/\n\tvar initSticky = function(self, $sticky){\n\t\t\t\n\t\t$sticky.each(function(){\n\t\t\t\n\t\t\tvar $stickyEl = $(this)\n\t\t\t\t,top = $stickyEl.offset().top;\n\t\t\t\n\t\t\t//save top value\n\t\t\t$stickyEl.data('top', top);\n\t\t\t\n\t\t\t//set position first time\n\t\t\tsetStickyPosition($stickyEl);\n\t\t});\n\t\t\n\t\t$(window).scroll(function(){\n\t\t\t\n\t\t\t$sticky.each(function(){\n\t\t\t\t\t\t\t\n\t\t\t\t//set position first time\n\t\t\t\tsetStickyPosition( $(this));\n\t\t\t});\n\t\t});\n\t};\n\t\n\t/**\n\t* init events\n\t* @param {Object} self - jplist panel 'this' object\n\t*/\n\tvar initEvents = function(self){\n\t\t\n\t\tvar control\n\t\t\t,NOT_RESTORED_FROM_COOKIES = false\n\t\t\t,RESTORED_FROM_COOKIES = true;\n\t\t\n\t\t//init events for every control in the panel\n\t\tfor(var i=0; i<self.controls.length; i++){\n\t\t\n\t\t\t//get control type\n\t\t\tcontrol = self.controls[i];\n\t\t\t\n\t\t\t//init control events\n\t\t\tcontrol.initEvents();\t\t\t\n\t\t}\n\t\t\n\t\t//event from controller to panel after html rebuild\n\t\tself.$jplistBox.on(self.options.answer_event, function(event, statusesArray, collection){\n\t\t\t\n\t\t\t//set statuses\n\t\t\tjQuery.fn.jplist.services.Panel.setStatuses(self.controls, statusesArray, NOT_RESTORED_FROM_COOKIES);\n\t\t});\n\t\t\n\t\t//event to panel -> panel sends ask event\n\t\tself.$jplistBox.on(self.options.force_ask_event, function(event, isDefault){\n\t\t\n\t\t\tvar statuses;\n\t\t\t\n\t\t\t//get current statuses\n\t\t\tstatuses = jQuery.fn.jplist.services.Panel.getStatuses(self.controls, isDefault);\n\t\t\t\n\t\t\t//trigger ask event\n\t\t\tself.$jplistBox.trigger(self.options.ask_event, [statuses]);\n\t\t});\t\t\n\t\t\n\t\t//event to panel -> restore panel from event data (statuses array)\n\t\tself.$jplistBox.on(self.options.restore_event, function(event, statusesArray){\n\t\t\t\n\t\t\t//restore drop downs\n\t\t\tjQuery.fn.jplist.services.Panel.setStatuses(self.controls, statusesArray, RESTORED_FROM_COOKIES);\n\t\t\t\n\t\t\t//ask event\n\t\t\tself.$jplistBox.trigger(self.options.ask_event, [statusesArray]);\n\t\t});\t\n\t\t\n\t\t//event to panel -> get all statuses and merge them with the given status, then send ask event\n\t\tself.$jplistBox.on(self.options.status_event, function(event, status){\t\t\t\n\t\t\t\n\t\t\tvar statuses\n\t\t\t\t,isDefault = false;\n\t\t\t\t\t\t\n\t\t\t//get current statuses\n\t\t\tstatuses = jQuery.fn.jplist.services.Panel.getStatuses(self.controls, isDefault);\n\t\t\t\n\t\t\t//merge\n\t\t\tstatuses = jQuery.fn.jplist.services.Panel.mergeWithStatus(statuses, status);\n\t\t\t\n\t\t\t//send ask event\n\t\t\tself.$jplistBox.trigger(self.options.ask_event, [statuses]);\n\t\t});\n\t\t\n\t\t//event to panel -> get deep links from all panel controls\n\t\tself.$jplistBox.on(self.options.change_url_deep_links_event, function(event){\t\n\t\t\n\t\t\tvar deepLinkUrl = '';\n\t\t\t\n\t\t\tif(self.options.deep_linking){\n\t\t\t\t\n\t\t\t\t//get deep link url\n\t\t\t\tdeepLinkUrl = getDeepLinksUrl(self, self.controls);\n\t\t\t\t\n\t\t\t\t//set new hash\n\t\t\t\t//window.location.hash = deepLinkUrl;\n\t\t\t\tjQuery.fn.jplist.services.Helper.replaceHash(deepLinkUrl);\n\t\t\t}\n\t\t});\n\t\t\n\t\t//event to panel -> set panel controls statuses by their deep links\n\t\tself.$jplistBox.on(self.options.set_deep_links_event, function(event){\t\n\t\t\t\n\t\t\tvar hash = $.trim(window.location.hash.replace('#', ''))\n\t\t\t\t,params;\n\t\t\t\n\t\t\t//set deep links\n\t\t\tparams = getParamsFromDeepLinkUrl(self, hash);\n\t\t\t\n\t\t\tif(params.length <= 0){\n\t\t\t\t\n\t\t\t\t//send panel redraw event\n\t\t\t\tself.$jplistBox.trigger(self.options.force_ask_event, [true]);\n\t\t\t}\n\t\t\telse{\t\t\t\t\n\t\t\t\tsetDeepLinks(self, params, self.controls);\t\t\t\t\n\t\t\t}\t\t\t\n\t\t});\n\t\t\n\t\t/**\n\t\t* bind rebuild panel event\n\t\t* @param {Object} event\n\t\t* @param {Function} callback\n\t\t*/\n\t\tself.$jplistBox.on(self.options.rebuild_panel_event, function(event, callback){\n\t\t\t\n\t\t\t//init panel controls\n\t\t\tself.$controls = self.$panel.find('[data-control-type]');\t\t\t\n\t\t\tself.controls = getPanelControls(self, self.$controls);\n\t\t\t\n\t\t\t//get panel paths\n\t\t\tself.paths = jQuery.fn.jplist.services.Panel.getPaths(self.controls);\n\t\t\t\n\t\t\t//init events for every control in the panel\n\t\t\tfor(var i=0; i<self.controls.length; i++){\n\t\t\t\n\t\t\t\t//get control type\n\t\t\t\tcontrol = self.controls[i];\n\t\t\t\t\n\t\t\t\t//init control events\n\t\t\t\tcontrol.initEvents();\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif($.isFunction(callback)){\n\t\t\t\tcallback(self.$controls, self.controls, self.paths);\n\t\t\t}\n\t\t});\t\t\n\t};\n\t\n\t/**\n\t* panel constructor\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {Object} options - jplist options\n\t* @param {jQuery.fn.jplist.controller.Events} events\n\t* @return {Object} - panel + this\n\t* @constructor \n\t*/\n\tvar Init = function($jplistBox, options, events){\n\t\n\t\tvar self = {\n\t\t\toptions: options\t//user options\t\n\t\t\t,$jplistBox: $jplistBox //jplist container\n\t\t\t,$panel: $jplistBox.find(options.panel_path) //panel jquery element\t\t\n\t\t\t,$controls: null //jquery controls\n\t\t\t,$sticky: null\n\t\t\t,events: events\n\t\t\t\t\t\n\t\t\t,paths: [] //all paths\t\n\t\t\t,controls: [] //panel controls\n\t\t};\t\t\t\n\n\t\t//init panel controls\n\t\tself.$controls = self.$panel.find('[data-control-type]');\t\t\t\n\t\tself.controls = getPanelControls(self, self.$controls);\n\t\t\n\t\t//get panel paths\n\t\tself.paths = jQuery.fn.jplist.services.Panel.getPaths(self.controls);\n\t\t\n\t\t//find sticky elements\n\t\tself.$sticky = self.$jplistBox.find('[data-sticky=\"true\"]');\n\t\t\n\t\t//init sticky\n\t\tif(self.$sticky.length > 0){\n\t\t\tinitSticky(self, self.$sticky);\n\t\t}\n\t\t\n\t\t//init events\n\t\tinitEvents(self);\n\t\t\n\t\treturn $.extend(this, self);\n\t};\n\t\n\t/**\n\t* Panel constructor\n\t* @param {jQueryObject} $jplistBox - jplist jquery element\n\t* @param {Object} options - jplist options\n\t* @param {jQuery.fn.jplist.controller.Events} events\n\t* @constructor \n    * @class Panel class - representation of jplist panel object\n    * @memberOf jQuery.fn.jplist\n\t*\n\t* @property {Object} options - user options\t\n\t* @property {jQueryObject} $jplistBox - jplist root element\n\t* @property {jQueryObject} $panel - panel jquery element\n\t* @property {jQueryObject} $sticky - sticky elements on the panel\n\t* @property {jQuery.fn.jplist.controller.Events} events\n\t* @property {jQueryObject} $controls - jquery controls list\n\t* @property {Array.<jQuery.fn.jplist.models.Path>} paths - all controls paths\n\t* @property {Array.<jQuery.fn.jplist.view.PanelControl>} paths - all controls\n\t*/\n\tjQuery.fn.jplist.view.Panel = function($jplistBox, options, events){\n\t\n\t\tvar self;\t\n\n\t\t//call constructor\n\t\tself = new Init($jplistBox, options, events);\n\t\t\n\t\t//properties\n\t\tthis.paths = self['paths'];\n\t\tthis.controls = self['controls'];\n\t};\n})(jQuery);"],"sourceRoot":"/source/"}