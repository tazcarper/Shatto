{"version":3,"sources":["map/jplist/controls/toggle-filters/checkbox-text-filter.js"],"names":[],"mappings":"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","file":"map/jplist/controls/toggle-filters/checkbox-text-filter.js","sourcesContent":["(function(jQuery){\n\t'use strict';\n\n    /**\n\t* Checkbox text filter control\n\t* @type {Object}\n    * @class CheckboxTextFilter - checkbox text filter control\n    * @memberOf jQuery.fn.jplist\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter = {};\n\n    /**\n\t* Status object related data - used to define and perform filter action\n\t* @param {Array.<string>} textGroup - list of text values\n    * @param {string} logic - 'or' / 'and'\n    * @param {string} path - data-path attribute of the control\n    * @param {string} ignoreRegex\n\t* @constructor\n\t* @function\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.statusRelatedData = function(textGroup, logic, path, ignoreRegex){\n\n\t\treturn {\n\t\t\ttextGroup: textGroup\n            ,logic: logic\n            ,path: path\n            ,ignoreRegex: ignoreRegex\n\t\t\t,filterType: 'textGroup'\n\t\t};\n\t};\n\n    /**\n\t* render CheckboxTextFilter control html\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.render = function(control){\n\n\t\tvar $control = control.$control\n\t\t\t,$checkboxes = $control.find('input[type=\"checkbox\"]');\n\n\t\t//in every checkbox: save if it's checked in it's data\n\t\t$checkboxes.each(function(){\n\t\t\tvar $cb = $(this);\n\t\t\t$cb.data('checked', $cb.get(0).checked);\n\t\t});\n\n\t\t//save vars to the 'data'\n\t\t$control.data('checkboxes', $checkboxes);\n\t};\n\n    /**\n\t* Get deep link\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {string} deep link\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.getDeepLink = function(control){\n\n\t\tvar deepLink = ''\n\t\t\t,status\n\t\t\t,isDefault = false\n\t\t\t,value = '';\n\n\t\t//get status\n\t\tstatus = jQuery.fn.jplist.controls.CheckboxTextFilter.getStatus(isDefault, control);\n\n\t\tif(status.data && $['isArray'](status.data.textGroup) && status.data.textGroup.length > 0){\n\n\t\t\tfor(var i=0; i<status.data.textGroup.length; i++){\n\n\t\t\t\tif(value !== ''){\n\t\t\t\t\tvalue += '~';\n\t\t\t\t}\n\n\t\t\t\tvalue += status.data.textGroup[i];\n\t\t\t}\n\n\t\t\t//init deep link\n\t\t\tdeepLink = control.name + '--textGroup=' + value;\n\t\t}\n\n\t\treturn deepLink;\n\t};\n\n    /**\n\t* Set deep link\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {string} propName - deep link property name\n\t* @param {string} propValue - deep link property value\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.getStatusByDeepLink = function(control, propName, propValue){\n\n\t\tvar isDefault = true\n\t\t\t,status = null\n\t\t\t,sections;\n\n\t\t//get status\n\t\tstatus = jQuery.fn.jplist.controls.CheckboxTextFilter.getStatus(isDefault, control);\n\n\t\tif(status.data){\n\n\t\t\tif(propName === 'textGroup'){\n\n\t\t\t\tsections = propValue.split('~');\n\n\t\t\t\tif(sections.length > 0){\n\n\t\t\t\t\tstatus.data.textGroup = sections;\n\n\t\t\t\t\t//trigger status event\n\t\t\t\t\t//control.$jplistBox.trigger(control.options.status_event, [status]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn status;\n\t};\n\n    /**\n\t* Get control paths\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {Array.<jQuery.fn.jplist.models.Path>} paths\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.getPaths = function(control, paths){\n\n\t\tvar $control = control.$control\n\t\t\t,dataPath\n\t\t\t,path;\n\n        //get data-path\n\t    dataPath = $control.attr('data-path');\n\n        if(dataPath){\n\n            //create path object\n\t\t\tpath = new jQuery.fn.jplist.models.Path(dataPath, 'text');\n\n            //add path to the paths list\n            if(!jQuery.fn.jplist.services.Path.isPathInList(path, paths)){\n                paths.push(path);\n            }\n        }\n\t};\n\n    /**\n\t* Get control status\n\t* @param {boolean} isDefault - if true, get default (initial) control status; else - get current control status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.getStatus = function(isDefault, control){\n\n\t\tvar $control = control.$control\n\t\t\t,$checkboxes = $control.data('checkboxes')\n\t\t\t,data\n            ,textGroup = []\n            ,cbVal\n\t\t\t,$cb\n\t\t\t,cbData\n\t\t\t,status\n            ,dataPath\n            ,dataLogic\n            ,ignore = ''\n            ,i;\n\n\t\tif(isDefault){\n\n\t\t\t//init path group\n\t\t\tfor(i=0; i<$checkboxes.length; i++){\n\n\t\t\t\t//get checkbox\n\t\t\t\t$cb = $checkboxes.eq(i);\n\n\t\t\t\t//get checkbox data\n\t\t\t\tcbData = $cb.data('checked');\n\n\t\t\t\tif(!!cbData){\n\n\t\t\t\t\t//get checkbox value\n\t\t\t\t    cbVal = $cb.val();\n\n\t\t\t\t\tif(cbVal){\n\t\t\t\t\t\ttextGroup.push(cbVal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse{\n\n\t\t\t//init text group: get all selected checkbox values\n\t\t\tfor(i=0; i<$checkboxes.length; i++){\n\n\t\t\t\t//get checkbox\n\t\t\t\t$cb = $checkboxes.eq(i);\n\n\t\t\t\t//get checkbox value\n\t\t\t\tcbVal = $cb.val();\n\n\t\t\t\tif(cbVal && $cb.get(0).checked){\n\t\t\t\t\ttextGroup.push(cbVal);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        //get data-path attribute\n        dataPath = $control.attr('data-path');\n\n        //get data-logic\n        dataLogic = $control.attr('data-logic');\n        if(!dataLogic){\n            dataLogic = 'or';\n        }\n\n        if(control.controlTypeOptions && control.controlTypeOptions.ignore){\n\n\t\t\t//get ignore characters\n\t\t\tignore = control.controlTypeOptions.ignore;\n\t\t}\n\n\t\t//init status related data\n\t\tdata = new jQuery.fn.jplist.controls.CheckboxTextFilter.statusRelatedData(textGroup, dataLogic, dataPath, ignore);\n\n\t\t//init status\n\t\tstatus = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, control.cookies, control.category);\n\n\t\treturn status;\n\t};\n\n    /**\n\t* Set control status\n\t* @param {jQuery.fn.jplist.models.Status} status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {boolean} isCookie - is status restored from cookies\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.setStatus = function(status, control, isCookie){\n\n\t\tvar cbVal\n\t\t\t,$control = control.$control\n\t\t\t,$cb\n\t\t\t,$checkboxes = $control.data('checkboxes');\n\n\t\tif($checkboxes){\n\n\t\t\t//reset\tall checkboxes\n\t\t\t$checkboxes.each(function(){\n\t\t\t\t$(this).get(0).checked = false;\n\t\t\t});\n\n\t\t\tif(status.data && status.data.textGroup && $['isArray'](status.data.textGroup) && status.data.textGroup.length > 0){\n\n\t\t\t\tfor(var i=0; i<status.data.textGroup.length; i++){\n\n\t\t\t\t\t//get path\n\t\t\t\t\tcbVal = status.data.textGroup[i];\n\n\t\t\t\t\t$cb = $checkboxes.filter('[value=\"' + cbVal + '\"]');\n\n\t\t\t\t\tif($cb.length > 0){\n\t\t\t\t\t\t$cb.get(0).checked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t* Init control events\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.CheckboxTextFilter\n\t*/\n\tjQuery.fn.jplist.controls.CheckboxTextFilter.initEvents = function(control){\n\n\t\tvar $control = control.$control\n\t\t\t,checkboxes = $control.data('checkboxes');\n\n\t\tcheckboxes.off('change').change(function(){\n\t\t\tcontrol.events.lastStatus = jQuery.fn.jplist.controls.CheckboxTextFilter.getStatus(false, control);\n\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t});\n\t};\n\n})(jQuery);\n"],"sourceRoot":"/source/"}