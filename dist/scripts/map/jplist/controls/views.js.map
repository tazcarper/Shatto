{"version":3,"sources":["map/jplist/controls/views.js"],"names":[],"mappings":"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","file":"map/jplist/controls/views.js","sourcesContent":["(function($){\n\t'use strict';\t\t\n\t\n\t/** \n\t* List/grid view control\n\t* @type {Object} \n    * @class Views control - used for grid/list view\n    * @memberOf jQuery.fn.jplist\n\t*/\n\tjQuery.fn.jplist.controls.Views = {};\n\t\n\t/**\n\t* Status object related data (using in communication with controller)\n\t* @param {boolean} isGrid - does control have class 'grid'\n\t* @constructor\n\t* @function\n\t*/\n\tjQuery.fn.jplist.controls.Views.statusRelatedData = function(isGrid){\n\t\t\n\t\treturn {\n\t\t\tisGrid: isGrid\n\t\t};\n\t};\n\t\n\t/**\n\t* Render control html\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.Views\n\t*/\n\tjQuery.fn.jplist.controls.Views.render = function(control){\n\t\t\n\t\tvar listBtn\n\t\t\t,gridBtn\n            ,defaultGrid = 'list-view';\n\n        if(control.$jplistBox.hasClass('grid')){\n            defaultGrid = 'grid-view';\n        }\n\n\t\t//find buttons\n\t\tlistBtn = control.$control.find('.list-view');\n\t\tgridBtn = control.$control.find('.grid-view');\n\t\t\n\t\t//add to the data\n\t\tcontrol.$control.data('list-view-btn', listBtn);\n\t\tcontrol.$control.data('grid-view-btn', gridBtn);\n        control.$control.data('default-grid', defaultGrid);\n\t};\n\t\n\t/**\n\t* Get deep link\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {string} deep link\n\t* @memberOf jQuery.fn.jplist.controls.Views\n\t*/\n\tjQuery.fn.jplist.controls.Views.getDeepLink = function(control){\n\t\t\n\t\tvar deepLink = ''\n\t\t\t,status\n\t\t\t,isDefault = false;\n\t\t\n\t\t//get status\n\t\tstatus = jQuery.fn.jplist.controls.Views.getStatus(isDefault, control);\n\n\t\tif(status.data && status.data.isGrid){\n\n\t\t\t//init deep link\n\t\t\tdeepLink = control.name + '--isGrid=true';\n\t\t}\n\t\t\n\t\treturn deepLink;\n\t};\n\t\n\t/**\n\t* Set deep link\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {string} propName - deep link property name\n\t* @param {string} propValue - deep link property value\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.Views\n\t*/\n\tjQuery.fn.jplist.controls.Views.getStatusByDeepLink = function(control, propName, propValue){\n\t\t\n\t\tvar isDefault = true\n\t\t\t,status;\n\t\t\t\n\t\t//get status\n\t\tstatus = jQuery.fn.jplist.controls.Views.getStatus(isDefault, control);\n\t\t\n\t\tif(status.data){\n\t\t\n\t\t\tif(propName === 'isGrid'){\n\t\t\t\t\n\t\t\t\t//set current page\n\t\t\t\tstatus.data.isGrid = true;\n\t\t\t\t\n\t\t\t\t//trigger status event\n\t\t\t\t//control.$jplistBox.trigger(control.options.status_event, [status]);\t\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn status;\n\t};\n\t\n\t/**\n\t* Get control status\n\t* @param {boolean} isDefault - if true, get default (initial) control status; else - get current control status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @return {jQuery.fn.jplist.models.Status}\n\t* @memberOf jQuery.fn.jplist.controls.Views\n\t*/\n\tjQuery.fn.jplist.controls.Views.getStatus = function(isDefault, control){\n\t\t\n\t\tvar data\n\t\t\t,status\n            ,defaultGrid\n            ,isGrid = false;\n\t\t\t\t\t\n        if(isDefault){\n            defaultGrid = control.$control.data('default-grid');\n\n            if(defaultGrid && defaultGrid === 'grid-view'){\n\n                //create status related data\n\t\t        isGrid = true;\n            }\n        }\n        else{\n            isGrid = control.$jplistBox.hasClass('grid');\n        }\n\t\t\n\t\t//create status related data\n\t\tdata = new jQuery.fn.jplist.controls.Views.statusRelatedData(isGrid);\n\t\t\n\t\t//create status\n\t\tstatus = new jQuery.fn.jplist.models.Status(control.name, control.action, control.type, data, control.cookies, control.category);\n\t\t\n\t\treturn status;\t\t\t\n\t};\n\t\n\t/**\n\t* Set control status\n\t* @param {jQuery.fn.jplist.models.Status} status\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @param {boolean} isCookie - is status restored from cookies\n\t* @memberOf jQuery.fn.jplist.controls.Views\n\t*/\n\tjQuery.fn.jplist.controls.Views.setStatus = function(status, control, isCookie){\n\t\n\t\tvar isGrid;\t\t\n\t\tif(status.data){\n\t\t\tif(!control.cookies && isCookie){\n\t\t\t\n\t\t\t\t//change class\n\t\t\t\tcontrol.$jplistBox.removeClass('grid');\n\t\t\t\tstatus.data.isGrid = false;\n\t\t\t\t\n\t\t\t\t//force ask status event\t\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.status_event, [status]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//should control have class 'grid'?\n\t\t\t\tisGrid = status.data.isGrid;\n\t\t\t\t\n\t\t\t\tif(isGrid){\n\t\t\t\t\tcontrol.$jplistBox.addClass('grid');\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tcontrol.$jplistBox.removeClass('grid');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t* Init control events\n\t* @param {jQuery.fn.jplist.view.PanelControl} control\n\t* @memberOf jQuery.fn.jplist.controls.Views\n\t*/\n\tjQuery.fn.jplist.controls.Views.initEvents = function(control){\n\t\n\t\tvar $listBtn\n\t\t\t,$gridBtn;\n\t\t\t\n\t\t//find buttons\n\t\t$listBtn = control.$control.data('list-view-btn');\n\t\t$gridBtn = control.$control.data('grid-view-btn');\n\t\t\n\t\tif($listBtn.length > 0){\n\t\t\t$listBtn.off('click').on('click', function(){\n\t\t\t\n\t\t\t\t//change class\n\t\t\t\tcontrol.$jplistBox.removeClass('grid');\n\t\t\t\t\n\t\t\t\t//update last status\n\t\t\t\tcontrol.events.lastStatus = jQuery.fn.jplist.controls.Views.getStatus(false, control);\n\t\t\t\n\t\t\t\t//force ask event\t\t\t\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t});\n\t\t}\n\t\t\n\t\tif($gridBtn.length > 0){\n\t\t\t$gridBtn.off('click').on('click', function(){\n\t\t\t\n\t\t\t\t//change class\n\t\t\t\tcontrol.$jplistBox.addClass('grid');\n\t\t\t\t\n\t\t\t\t//update last status\n\t\t\t\tcontrol.events.lastStatus = jQuery.fn.jplist.controls.Views.getStatus(false, control);\n\t\t\t\t\n\t\t\t\t//force ask event\t\t\t\n\t\t\t\tcontrol.$jplistBox.trigger(control.options.force_ask_event, [false]);\n\t\t\t});\n\t\t}\n\t};\n\t\n})(jQuery);\n\n"],"sourceRoot":"/source/"}