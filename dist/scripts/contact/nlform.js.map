{"version":3,"sources":["contact/nlform.js"],"names":[],"mappings":"aAAA,CACA,CAAC,SAAS,MAAT,CAAiB,CAEjB,aAEA,IAAI,SAAW,OAAO,QAAtB,CAEA,GAAI,CAAC,OAAO,SAAP,CAAiB,IAAtB,CAA4B,CAC3B,OAAO,SAAP,CAAiB,IAAjB,CAAwB,UAAW,CAClC,OAAO,KAAK,OAAL,CAAa,YAAb,CAA2B,EAA3B,CAAP,CACA,CAFD,CAGA,CAED,SAAS,MAAT,CAAgB,EAAhB,CAAoB,CACnB,KAAK,EAAL,CAAU,EAAV,CACA,KAAK,OAAL,CAAe,KAAK,EAAL,CAAQ,aAAR,CAAsB,cAAtB,CAAf,CACA,KAAK,MAAL,CAAc,EAAd,CACA,KAAK,OAAL,CAAe,CAAC,CAAhB,CACA,KAAK,KAAL,GACA,CAED,OAAO,SAAP,CAAmB,CAClB,MAAO,gBAAW,CACjB,IAAI,KAAO,IAAX,CACA,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,KAAK,EAAL,CAAQ,gBAAR,CAAyB,QAAzB,CAA3B,EAA+D,OAA/D,CAAuE,SAAS,EAAT,CAAa,CAAb,CAAgB,CACtF,KAAK,OAAL,GACA,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,OAAJ,CAAY,IAAZ,CAAkB,EAAlB,CAAsB,UAAtB,CAAkC,KAAK,OAAvC,CAAjB,EACA,CAHD,EAIA,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,KAAK,EAAL,CAAQ,gBAAR,CAAyB,OAAzB,CAA3B,EAA8D,OAA9D,CAAsE,SAAS,EAAT,CAAa,CAAb,CAAgB,CACrF,KAAK,OAAL,GACA,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAI,OAAJ,CAAY,IAAZ,CAAkB,EAAlB,CAAsB,OAAtB,CAA+B,KAAK,OAApC,CAAjB,EACA,CAHD,EAIA,KAAK,OAAL,CAAa,gBAAb,CAA8B,OAA9B,CAAuC,SAAS,EAAT,CAAa,CACnD,KAAK,UAAL,GACA,CAFD,EAGA,KAAK,OAAL,CAAa,gBAAb,CAA8B,YAA9B,CAA4C,SAAS,EAAT,CAAa,CACxD,KAAK,UAAL,GACA,CAFD,EAGA,CAjBiB,CAkBlB,WAAY,qBAAW,CACtB,GAAI,KAAK,OAAL,GAAiB,CAAC,CAAtB,CAAyB,CACxB,KAAK,MAAL,CAAY,KAAK,OAAjB,EAA0B,KAA1B,GACA,CACD,CAtBiB,CAAnB,CAyBA,SAAS,OAAT,CAAiB,IAAjB,CAAuB,EAAvB,CAA2B,IAA3B,CAAiC,GAAjC,CAAsC,CACrC,KAAK,IAAL,CAAY,IAAZ,CACA,KAAK,UAAL,CAAkB,EAAlB,CACA,KAAK,GAAL,CAAW,GAAX,CACA,KAAK,IAAL,CAAY,IAAZ,CACA,KAAK,OAAL,GACA,KAAK,WAAL,GACA,CAED,QAAQ,SAAR,CAAoB,CACnB,QAAS,kBAAW,CACnB,GAAI,KAAK,IAAL,GAAc,UAAlB,CAA8B,CAC7B,KAAK,eAAL,GACA,CAFD,KAEO,GAAI,KAAK,IAAL,GAAc,OAAlB,CAA2B,CACjC,KAAK,YAAL,GACA,CACD,CAPkB,CAQnB,gBAAiB,0BAAW,CAC3B,IAAI,KAAO,IAAX,CACA,KAAK,GAAL,CAAW,SAAS,aAAT,CAAuB,KAAvB,CAAX,CACA,KAAK,GAAL,CAAS,SAAT,CAAqB,wBAArB,CACA,KAAK,MAAL,CAAc,SAAS,aAAT,CAAuB,GAAvB,CAAd,CACA,KAAK,MAAL,CAAY,SAAZ,CAAwB,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAK,UAAL,CAAgB,aAAxC,EAAuD,SAA/E,CACA,KAAK,MAAL,CAAY,SAAZ,CAAwB,kBAAxB,CACA,KAAK,WAAL,CAAmB,SAAS,aAAT,CAAuB,IAAvB,CAAnB,CACA,IAAI,MAAQ,EAAZ,CACA,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,KAAK,UAAL,CAAgB,gBAAhB,CAAiC,QAAjC,CAA3B,EAAuE,OAAvE,CAA+E,SAAS,EAAT,CAAa,CAAb,CAAgB,CAC9F,OAAS,KAAK,UAAL,CAAgB,aAAhB,GAAkC,CAAlC,CAAsC,oCAAsC,GAAG,SAAzC,CAAqD,OAA3F,CAAqG,OAAS,GAAG,SAAZ,CAAwB,OAAtI,C;AAEA,GAAI,KAAK,UAAL,CAAgB,aAAhB,GAAkC,CAAtC,CAAyC,CACxC,KAAK,WAAL,CAAmB,CAAnB,CACA,CACD,CAND,EAOA,KAAK,WAAL,CAAiB,SAAjB,CAA6B,KAA7B,CACA,KAAK,WAAL,CAAiB,SAAjB,CAA6B,iBAA7B,CACA,KAAK,WAAL,CAAmB,SAAS,aAAT,CAAuB,KAAvB,CAAnB,CACA,KAAK,WAAL,CAAiB,SAAjB,CAA6B,WAA7B,CACA,KAAK,GAAL,CAAS,WAAT,CAAqB,KAAK,MAA1B,EAEA,KAAK,WAAL,CAAiB,WAAjB,CAA6B,KAAK,WAAlC,EACA,KAAK,UAAL,CAAgB,UAAhB,CAA2B,YAA3B,CAAwC,KAAK,GAA7C,CAAkD,KAAK,UAAvD,EACA,KAAK,GAAL,CAAS,UAAT,CAAoB,YAApB,CAAiC,KAAK,WAAtC,CAAmD,KAAK,GAAxD,EACA,KAAK,UAAL,CAAgB,KAAhB,CAAsB,OAAtB,CAAgC,MAAhC,CACA,CAlCkB,CAmCnB,aAAc,uBAAW,CACxB,IAAI,KAAO,IAAX,C;AAGA,KAAK,GAAL,CAAW,SAAS,aAAT,CAAuB,KAAvB,CAAX,CACA,GAAI,KAAK,UAAL,CAAgB,SAAhB,GAA8B,SAAlC,CAA6C,CAC5C,KAAK,GAAL,CAAS,SAAT,CAAqB,4BAArB,CACA,CAFD,KAEO,CACN,KAAK,GAAL,CAAS,SAAT,CAAqB,mBAArB,CACA,CACD,KAAK,MAAL,CAAc,SAAS,aAAT,CAAuB,GAAvB,CAAd,CACA,KAAK,MAAL,CAAY,SAAZ,CAAwB,KAAK,UAAL,CAAgB,YAAhB,CAA6B,aAA7B,CAAxB,CACA,KAAK,MAAL,CAAY,SAAZ,CAAwB,kBAAxB,CACA,KAAK,WAAL,CAAmB,SAAS,aAAT,CAAuB,IAAvB,CAAnB,CAEA,GAAI,KAAK,UAAL,CAAgB,SAAhB,GAA8B,SAAlC,CAA6C,CAC5C,KAAK,QAAL,CAAgB,SAAS,aAAT,CAAuB,UAAvB,CAAhB,CACA,KAAK,QAAL,CAAc,SAAd,CAA0B,QAA1B,CACA,CAHD,KAGO,CACN,KAAK,QAAL,CAAgB,SAAS,aAAT,CAAuB,OAAvB,CAAhB,CACA,KAAK,QAAL,CAAc,YAAd,CAA2B,MAA3B,CAAmC,MAAnC,EACA,CAED,KAAK,QAAL,CAAc,YAAd,CAA2B,aAA3B,CAA0C,KAAK,UAAL,CAAgB,YAAhB,CAA6B,aAA7B,CAA1C,EAEA,KAAK,QAAL,CAAc,YAAd,CAA2B,UAA3B,CAAuC,IAAvC,EACA,KAAK,eAAL,CAAuB,SAAS,aAAT,CAAuB,IAAvB,CAAvB,CACA,KAAK,eAAL,CAAqB,SAArB,CAAiC,aAAjC,CACA,GAAI,KAAK,UAAL,CAAgB,SAAhB,GAA8B,SAAlC,CAA6C,CAC5C,KAAK,WAAL,CAAmB,SAAS,aAAT,CAAuB,MAAvB,CAAnB,CACA,KAAK,WAAL,CAAiB,SAAjB,CAA6B,oCAA7B,CACA,CAHD,KAGO,CACN,KAAK,WAAL,CAAmB,SAAS,aAAT,CAAuB,MAAvB,CAAnB,CACA,KAAK,WAAL,CAAiB,SAAjB,CAA6B,6BAA7B,CACA,CAGD,KAAK,eAAL,CAAqB,WAArB,CAAiC,KAAK,QAAtC,EACA,KAAK,eAAL,CAAqB,WAArB,CAAiC,KAAK,WAAtC,E;;;AAIA,KAAK,WAAL,CAAiB,WAAjB,CAA6B,KAAK,eAAlC,E;AAEA,KAAK,GAAL,CAAS,WAAT,CAAqB,KAAK,MAA1B,EACA,KAAK,GAAL,CAAS,WAAT,CAAqB,KAAK,WAA1B,EACA,KAAK,UAAL,CAAgB,UAAhB,CAA2B,YAA3B,CAAwC,KAAK,GAA7C,CAAkD,KAAK,UAAvD,EACA,KAAK,UAAL,CAAgB,KAAhB,CAAsB,OAAtB,CAAgC,MAAhC,CACA,CAnFkB,CAoFnB,YAAa,sBAAW,CACvB,IAAI,KAAO,IAAX,CACA,KAAK,MAAL,CAAY,gBAAZ,CAA6B,OAA7B,CAAsC,SAAS,EAAT,CAAa,CAClD,GAAG,cAAH,GACA,GAAG,eAAH,GACA,KAAK,KAAL,GACA,CAJD,EAKA,KAAK,MAAL,CAAY,gBAAZ,CAA6B,YAA7B,CAA2C,SAAS,EAAT,CAAa,CACvD,GAAG,cAAH,GACA,GAAG,eAAH,GACA,KAAK,KAAL,GACA,CAJD,EAMA,GAAI,KAAK,IAAL,GAAc,UAAlB,CAA8B,CAC7B,IAAI,KAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,KAAK,WAAL,CAAiB,gBAAjB,CAAkC,IAAlC,CAA3B,CAAX,CACA,KAAK,OAAL,CAAa,SAAS,EAAT,CAAa,CAAb,CAAgB,CAC5B,GAAG,gBAAH,CAAoB,OAApB,CAA6B,SAAS,EAAT,CAAa,C;AAEzC,GAAG,cAAH,G;;AAGA,KAAK,KAAL,CAAW,EAAX,CAAe,KAAK,OAAL,CAAa,EAAb,CAAf,EACA,CAND,EAOA,GAAG,gBAAH,CAAoB,YAApB,CAAkC,SAAS,EAAT,CAAa,CAC9C,GAAG,cAAH,GACA,KAAK,KAAL,CAAW,EAAX,CAAe,KAAK,OAAL,CAAa,EAAb,CAAf,EACA,CAHD,EAIA,CAZD,EAaA,CAfD,KAeO,GAAI,KAAK,IAAL,GAAc,OAAd,EAAyB,KAAK,UAAL,CAAgB,SAAhB,GAA8B,SAA3D,CAAsE,CAC5E,KAAK,QAAL,CAAc,gBAAd,CAA+B,UAA/B,CAA2C,SAAS,EAAT,CAAa,CACvD,GAAI,GAAG,KAAH,GAAa,EAAjB,CAAqB,CACpB,IAAI,QAAU,KAAK,KAAnB,CACA,IAAI,MAAQ,SAAS,IAAT,CAAZ,CACA,GAAI,GAAG,QAAP,CAAiB,CAChB,KAAK,KAAL,CAAa,QAAU,IAAV,CAAiB,QAAQ,SAAR,CAAkB,KAAlB,CAAyB,QAAQ,MAAjC,CAA9B,CACA,GAAG,eAAH,GACA,CAHD,KAGO,C;;AAGN,KAAK,KAAL,CAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAnB,CAAsC,MAAtC,CAAb,CACA,KAAK,KAAL,GACA,CACD,CACD,CAdD,EAeA,KAAK,WAAL,CAAiB,gBAAjB,CAAkC,OAAlC,CAA2C,SAAS,EAAT,CAAa,CACvD,GAAG,cAAH,GACA,KAAK,KAAL,GACA,CAHD,EAIA,KAAK,WAAL,CAAiB,gBAAjB,CAAkC,YAAlC,CAAgD,SAAS,EAAT,CAAa,CAC5D,GAAG,cAAH,GACA,KAAK,KAAL,GACA,CAHD,EAIA,CAxBM,KAwBA,GAAI,KAAK,IAAL,GAAc,OAAlB,CAA2B,CACjC,KAAK,QAAL,CAAc,gBAAd,CAA+B,UAA/B,CAA2C,SAAS,EAAT,CAAa,CACvD,GAAI,GAAG,KAAH,GAAa,EAAjB,CAAqB,CACpB,KAAK,KAAL,GACA,CACD,CAJD,EAKA,KAAK,WAAL,CAAiB,gBAAjB,CAAkC,OAAlC,CAA2C,SAAS,EAAT,CAAa,CACvD,GAAG,cAAH,GACA,KAAK,KAAL,GACA,CAHD,EAIA,KAAK,WAAL,CAAiB,gBAAjB,CAAkC,YAAlC,CAAgD,SAAS,EAAT,CAAa,CAC5D,GAAG,cAAH,GACA,KAAK,KAAL,GACA,CAHD,EAIA,CAED,CAxJkB,CAyJnB,MAAO,gBAAW,CACjB,GAAI,KAAK,IAAT,CAAe,CACd,OAAO,KAAP,CACA,CACD,KAAK,IAAL,CAAY,IAAZ,CACA,KAAK,IAAL,CAAU,OAAV,CAAoB,KAAK,GAAzB,CACA,IAAI,KAAO,IAAX,C;;AAIA,GAAI,KAAK,UAAL,CAAgB,IAAhB,GAAyB,YAA7B,CAA2C,CAC1C,QAAQ,GAAR,CAAY,cAAZ,EACA,EAAE,YAAF,EAAgB,QAAhB,CAAyB,MAAzB,EACA,CAHD,KAGO,CACN,KAAK,GAAL,CAAS,SAAT,EAAsB,iBAAtB,CACA,CACD,GAAI,KAAK,UAAL,CAAgB,SAAhB,GAA8B,SAAlC,CAA6C,CAC5C,EAAE,0BAAF,EAA8B,GAA9B,CAAkC,KAAK,UAAL,CAAgB,KAAhB,CAAsB,OAAtB,CAA8B,gBAA9B,CAAgD,IAAhD,CAAlC,EACA,QAAQ,GAAR,CAAY,KAAK,UAAL,CAAgB,KAA5B,EACA,EAAE,0BAAF,EAA8B,KAA9B,GAEA,EAAE,0BAAF,EAA8B,IAA9B,CAAmC,aAAnC,CAAkD,EAAlD,EACA,QAAQ,GAAR,CAAY,IAAZ,EAEA,CARD,KAQO,CACN,EAAE,uBAAF,EAA2B,KAA3B,GACA,CACD,EAAE,cAAF,EAAkB,QAAlB,CAA2B,MAA3B,EACA,CArLkB,CAsLnB,MAAO,eAAS,GAAT,CAAc,GAAd,CAAmB,CACzB,GAAI,CAAC,KAAK,IAAV,CAAgB,CACf,OAAO,KAAP,CACA,CACD,KAAK,IAAL,CAAY,KAAZ,CACA,KAAK,IAAL,CAAU,OAAV,CAAoB,CAAC,CAArB,CAEA,EAAE,cAAF,EAAkB,WAAlB,CAA8B,MAA9B,EACA,GAAI,KAAK,IAAL,GAAc,UAAlB,CAA8B,CAC7B,EAAE,YAAF,EAAgB,WAAhB,CAA4B,MAA5B,EACA,GAAI,GAAJ,CAAS,CAER,IAAI,YAAc,KAAK,WAAL,CAAiB,QAAjB,CAA0B,KAAK,WAA/B,CAAlB,CACA,YAAY,SAAZ,CAAwB,EAAxB,CACA,IAAI,SAAJ,CAAgB,SAAhB,CACA,KAAK,MAAL,CAAY,SAAZ,CAAwB,IAAI,SAA5B,C;AAEA,KAAK,WAAL,CAAmB,GAAnB,C;AAEA,KAAK,UAAL,CAAgB,KAAhB,CAAwB,KAAK,UAAL,CAAgB,QAAhB,CAAyB,KAAK,WAA9B,EAA2C,KAAnE,CACA,CACD,CAbD,KAaO,GAAI,KAAK,IAAL,GAAc,OAAlB,CAA2B,CACjC,KAAK,GAAL,CAAS,SAAT,CAAqB,KAAK,GAAL,CAAS,SAAT,CAAmB,OAAnB,CAA2B,qBAA3B,CAAkD,EAAlD,CAArB,CACA,KAAK,QAAL,CAAc,IAAd,GACA,KAAK,MAAL,CAAY,SAAZ,CAAwB,KAAK,QAAL,CAAc,KAAd,CAAoB,IAApB,KAA+B,EAA/B,CAAoC,KAAK,QAAL,CAAc,KAAlD,CAA0D,KAAK,QAAL,CAAc,YAAd,CAA2B,aAA3B,CAAlF,CACA,KAAK,UAAL,CAAgB,KAAhB,CAAwB,KAAK,QAAL,CAAc,KAAtC,CAEA,IAAI,MAAQ,EAAE,UAAF,EAAc,IAAd,CAAmB,gBAAnB,EAAqC,GAArC,EAAZ,CACC,MAAQ,EAAE,UAAF,EAAc,IAAd,CAAmB,gBAAnB,EAAqC,GAArC,EADT,CAEC,GAAK,EAAE,UAAF,EAAc,IAAd,CAAmB,gBAAnB,CAFN,CAGA,QAAQ,GAAR,CAAY,QAAZ,EACA,OAAQ,KAAK,UAAL,CAAgB,EAAxB,E;AAEC,KAAK,OAAL,CACC,GAAG,qBAAH,CAAyB,OAAzB,CAAkC,QAAU,EAA5C,EAAgD,eAAhD,CAAgE,OAAhE,EAEA,GAAI,OAAS,GAAG,UAAH,CAAc,OAAd,CAAuB,IAAvB,CAA6B,SAA7B,IAA4C,KAAzD,CAAgE,CAC/D,GAAG,qBAAH,CAAyB,OAAzB,CAAkC,IAAlC,EAAwC,eAAxC,CAAwD,OAAxD,EACA,CAFD,KAEO,GAAI,QAAU,EAAV,EAAgB,QAAU,EAA9B,CAAkC,CACxC,GAAG,qBAAH,CAAyB,OAAzB,CAAkC,KAAlC,EAAyC,eAAzC,CAAyD,OAAzD,EACA,CACD,M;AAGD,KAAK,OAAL,CACC,GAAI,QAAU,EAAd,CAAkB,CACjB,GAAG,qBAAH,CAAyB,OAAzB,CAAkC,IAAlC,EAAwC,eAAxC,CAAwD,OAAxD,EACA,CAFD,KAEO,GAAI,QAAU,EAAd,CAAkB,CACxB,GAAG,qBAAH,CAAyB,OAAzB,CAAkC,KAAlC,EAAyC,eAAzC,CAAyD,OAAzD,EACA,QAAQ,GAAR,CAAY,aAAZ,EACA,CAED,GAAI,OAAS,QAAU,EAAnB,EAAyB,GAAG,UAAH,CAAc,OAAd,CAAuB,IAAvB,CAA6B,SAA7B,IAA4C,KAAzE,CAAgF,CAC/E,GAAG,qBAAH,CAAyB,OAAzB,CAAkC,IAAlC,EAAwC,eAAxC,CAAwD,OAAxD,EACA,CACD,MAED,QACC,MA3BF,CA6BA,EAAE,UAAF,EAAc,cAAd,CAA6B,iBAA7B,CAAgD,KAAK,UAAL,CAAgB,EAAhE,EACA,GAAI,KAAK,UAAL,CAAgB,KAAhB,GAA0B,EAA9B,CAAkC,CAEjC,GAAI,KAAK,QAAL,CAAc,SAAd,EAA2B,UAA/B,CAA2C,CAC1C,EAAE,6BAAF,EAAiC,WAAjC,CAA6C,QAA7C,EACA,EAAE,WAAF,EAAe,WAAf,CAA2B,QAA3B,EACA,CAED,CAPD,KAOO,CAEN,GAAI,KAAK,QAAL,CAAc,SAAd,EAA2B,UAA/B,CAA2C,CAC1C,EAAE,6BAAF,EAAiC,QAAjC,CAA0C,QAA1C,EACA,EAAE,WAAF,EAAe,WAAf,CAA2B,QAA3B,EACA,CAED,CAED,CACD,CApQkB,CAApB,C;AAwQA,OAAO,MAAP,CAAgB,MAAhB,CAEA,SAAS,QAAT,CAAkB,EAAlB,CAAsB,CACrB,GAAI,GAAG,cAAP,CAAuB,CACtB,OAAO,GAAG,cAAV,CACA,CAFD,KAEO,GAAI,SAAS,SAAb,CAAwB,CAC9B,GAAG,KAAH,GACA,IAAI,EAAI,SAAS,SAAT,CAAmB,WAAnB,EAAR,CACA,GAAI,GAAK,IAAT,CAAe,CACd,OAAO,CAAP,CACA,CACD,IAAI,GAAK,GAAG,eAAH,EAAT,CACC,GAAK,GAAG,SAAH,EADN,CAEA,GAAG,cAAH,CAAkB,EAAE,WAAF,EAAlB,EACA,GAAG,WAAH,CAAe,YAAf,CAA6B,EAA7B,EACA,OAAO,GAAG,IAAH,CAAQ,MAAf,CACA,CACD,OAAO,CAAP,CACA,CAED,CAlVD,EAkVG,MAlVH","file":"contact/nlform.js","sourcesContent":[";\n(function(window) {\n\n\t'use strict';\n\n\tvar document = window.document;\n\n\tif (!String.prototype.trim) {\n\t\tString.prototype.trim = function() {\n\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t\t};\n\t}\n\n\tfunction NLForm(el) {\n\t\tthis.el = el;\n\t\tthis.overlay = this.el.querySelector('.formOverlay');\n\t\tthis.fields = [];\n\t\tthis.fldOpen = -1;\n\t\tthis._init();\n\t}\n\n\tNLForm.prototype = {\n\t\t_init: function() {\n\t\t\tvar self = this;\n\t\t\tArray.prototype.slice.call(this.el.querySelectorAll('select')).forEach(function(el, i) {\n\t\t\t\tself.fldOpen++;\n\t\t\t\tself.fields.push(new NLField(self, el, 'dropdown', self.fldOpen));\n\t\t\t});\n\t\t\tArray.prototype.slice.call(this.el.querySelectorAll('input')).forEach(function(el, i) {\n\t\t\t\tself.fldOpen++;\n\t\t\t\tself.fields.push(new NLField(self, el, 'input', self.fldOpen));\n\t\t\t});\n\t\t\tthis.overlay.addEventListener('click', function(ev) {\n\t\t\t\tself._closeFlds();\n\t\t\t});\n\t\t\tthis.overlay.addEventListener('touchstart', function(ev) {\n\t\t\t\tself._closeFlds();\n\t\t\t});\n\t\t},\n\t\t_closeFlds: function() {\n\t\t\tif (this.fldOpen !== -1) {\n\t\t\t\tthis.fields[this.fldOpen].close();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction NLField(form, el, type, idx) {\n\t\tthis.form = form;\n\t\tthis.elOriginal = el;\n\t\tthis.pos = idx;\n\t\tthis.type = type;\n\t\tthis._create();\n\t\tthis._initEvents();\n\t}\n\n\tNLField.prototype = {\n\t\t_create: function() {\n\t\t\tif (this.type === 'dropdown') {\n\t\t\t\tthis._createDropDown();\n\t\t\t} else if (this.type === 'input') {\n\t\t\t\tthis._createInput();\n\t\t\t}\n\t\t},\n\t\t_createDropDown: function() {\n\t\t\tvar self = this;\n\t\t\tthis.fld = document.createElement('div');\n\t\t\tthis.fld.className = 'formField formDropdown';\n\t\t\tthis.toggle = document.createElement('a');\n\t\t\tthis.toggle.innerHTML = this.elOriginal.options[this.elOriginal.selectedIndex].innerHTML;\n\t\t\tthis.toggle.className = 'formField-toggle';\n\t\t\tthis.optionsList = document.createElement('ul');\n\t\t\tvar ihtml = '';\n\t\t\tArray.prototype.slice.call(this.elOriginal.querySelectorAll('option')).forEach(function(el, i) {\n\t\t\t\tihtml += self.elOriginal.selectedIndex === i ? '<li class=\"formDropdown-checked\">' + el.innerHTML + '</li>' : '<li>' + el.innerHTML + '</li>';\n\t\t\t\t// selected index value\n\t\t\t\tif (self.elOriginal.selectedIndex === i) {\n\t\t\t\t\tself.selectedIdx = i;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.optionsList.innerHTML = ihtml;\n\t\t\tthis.optionsList.className = \"custom_dropdown\";\n\t\t\tthis.ddContainer = document.createElement('div');\n\t\t\tthis.ddContainer.className = \"selection\";\n\t\t\tthis.fld.appendChild(this.toggle);\n\n\t\t\tthis.ddContainer.appendChild(this.optionsList);\n\t\t\tthis.elOriginal.parentNode.insertBefore(this.fld, this.elOriginal);\n\t\t\tthis.fld.parentNode.insertBefore(this.ddContainer, this.fld)\n\t\t\tthis.elOriginal.style.display = 'none';\n\t\t},\n\t\t_createInput: function() {\n\t\t\tvar self = this;\n\t\t\t//console.log(this);\n\n\t\t\tthis.fld = document.createElement('div');\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\tthis.fld.className = 'formField userMsg textarea';\n\t\t\t} else {\n\t\t\t\tthis.fld.className = 'formField userMsg';\n\t\t\t}\n\t\t\tthis.toggle = document.createElement('a');\n\t\t\tthis.toggle.innerHTML = this.elOriginal.getAttribute('placeholder');\n\t\t\tthis.toggle.className = 'formField-toggle';\n\t\t\tthis.optionsList = document.createElement('ul');\n\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\tthis.getinput = document.createElement('textarea');\n\t\t\t\tthis.getinput.className = \"common\"\n\t\t\t} else {\n\t\t\t\tthis.getinput = document.createElement('input');\n\t\t\t\tthis.getinput.setAttribute('type', 'text');\n\t\t\t}\n\n\t\t\tthis.getinput.setAttribute('placeholder', this.elOriginal.getAttribute('placeholder'));\n\n\t\t\tthis.getinput.setAttribute('required', true);\n\t\t\tthis.getinputWrapper = document.createElement('li');\n\t\t\tthis.getinputWrapper.className = 'nl-ti-input';\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\tthis.inputsubmit = document.createElement('span');\n\t\t\t\tthis.inputsubmit.className = 'formField-go icon-checkmark bottom';\n\t\t\t} else {\n\t\t\t\tthis.inputsubmit = document.createElement('span');\n\t\t\t\tthis.inputsubmit.className = 'formField-go icon-checkmark';\n\t\t\t}\n\n\n\t\t\tthis.getinputWrapper.appendChild(this.getinput);\n\t\t\tthis.getinputWrapper.appendChild(this.inputsubmit);\n\t\t\t// this.example = document.createElement( 'li' );\n\t\t\t// this.example.className = 'nl-ti-example';\n\t\t\t// this.example.innerHTML = this.elOriginal.getAttribute( 'data-subline' );\n\t\t\tthis.optionsList.appendChild(this.getinputWrapper);\n\t\t\t// this.optionsList.appendChild( this.example );\n\t\t\tthis.fld.appendChild(this.toggle);\n\t\t\tthis.fld.appendChild(this.optionsList);\n\t\t\tthis.elOriginal.parentNode.insertBefore(this.fld, this.elOriginal);\n\t\t\tthis.elOriginal.style.display = 'none';\n\t\t},\n\t\t_initEvents: function() {\n\t\t\tvar self = this;\n\t\t\tthis.toggle.addEventListener('click', function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopPropagation();\n\t\t\t\tself._open();\n\t\t\t});\n\t\t\tthis.toggle.addEventListener('touchstart', function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopPropagation();\n\t\t\t\tself._open();\n\t\t\t});\n\n\t\t\tif (this.type === 'dropdown') {\n\t\t\t\tvar opts = Array.prototype.slice.call(this.optionsList.querySelectorAll('li'));\n\t\t\t\topts.forEach(function(el, i) {\n\t\t\t\t\tel.addEventListener('click', function(ev) {\n\t\t\t\t\t\t//console.log('clicked an item');\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t//console.log(el);\n\t\t\t\t\t\t//console.log(opts.indexOf(el));\n\t\t\t\t\t\tself.close(el, opts.indexOf(el));\n\t\t\t\t\t});\n\t\t\t\t\tel.addEventListener('touchstart', function(ev) {\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\tself.close(el, opts.indexOf(el));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else if (this.type === 'input' && this.elOriginal.className === 'message') {\n\t\t\t\tthis.getinput.addEventListener('keypress', function(ev) {\n\t\t\t\t\tif (ev.which === 13) {\n\t\t\t\t\t\tvar content = this.value;\n\t\t\t\t\t\tvar caret = getCaret(this);\n\t\t\t\t\t\tif (ev.shiftKey) {\n\t\t\t\t\t\t\tthis.value = content + \"\\n\" + content.substring(caret, content.length);\n\t\t\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// this.value = content.substring(0, caret - 1) + content.substring(caret, content.length);\n\t\t\t\t\t\t\t//console.log(this.value);\n\t\t\t\t\t\t\tthis.value = this.value.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n\t\t\t\t\t\t\tself.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('click', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('touchstart', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t} else if (this.type === 'input') {\n\t\t\t\tthis.getinput.addEventListener('keypress', function(ev) {\n\t\t\t\t\tif (ev.which === 13) {\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('click', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('touchstart', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\t\t_open: function() {\n\t\t\tif (this.open) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.open = true;\n\t\t\tthis.form.fldOpen = this.pos;\n\t\t\tvar self = this;\n\t\t\t//console.log(this);\n\n\t\t\t//console.log(this.elOriginal.type);\n\t\t\tif (this.elOriginal.type === 'select-one') {\n\t\t\t\tconsole.log('its dropdown')\n\t\t\t\t$('.selection').addClass('open');\n\t\t\t} else {\n\t\t\t\tthis.fld.className += ' formField-open';\n\t\t\t}\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\t$('.formField-open textarea').val(this.elOriginal.value.replace(/<br\\s*[\\/]?>/gi, \"\\n\"));\n\t\t\t\tconsole.log(this.elOriginal.value);\n\t\t\t\t$('.formField-open textarea').focus();\n\n\t\t\t\t$('.formField-open textarea').attr('placeholder', '');\n\t\t\t\tconsole.log(this);\n\n\t\t\t} else {\n\t\t\t\t$('.formField-open input').focus();\n\t\t\t}\n\t\t\t$('.formOverlay').addClass('open');\n\t\t},\n\t\tclose: function(opt, idx) {\n\t\t\tif (!this.open) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.open = false;\n\t\t\tthis.form.fldOpen = -1;\n\n\t\t\t$('.formOverlay').removeClass('open');\n\t\t\tif (this.type === 'dropdown') {\n\t\t\t\t$('.selection').removeClass('open');\n\t\t\t\tif (opt) {\n\n\t\t\t\t\tvar selectedopt = this.optionsList.children[this.selectedIdx];\n\t\t\t\t\tselectedopt.className = '';\n\t\t\t\t\topt.className = 'checked';\n\t\t\t\t\tthis.toggle.innerHTML = opt.innerHTML;\n\t\t\t\t\t// update selected index value\n\t\t\t\t\tthis.selectedIdx = idx;\n\t\t\t\t\t// update original select element´s value\n\t\t\t\t\tthis.elOriginal.value = this.elOriginal.children[this.selectedIdx].value;\n\t\t\t\t}\n\t\t\t} else if (this.type === 'input') {\n\t\t\t\tthis.fld.className = this.fld.className.replace(/\\b formField-open\\b/, '');\n\t\t\t\tthis.getinput.blur();\n\t\t\t\tthis.toggle.innerHTML = this.getinput.value.trim() !== '' ? this.getinput.value : this.getinput.getAttribute('placeholder');\n\t\t\t\tthis.elOriginal.value = this.getinput.value;\n\t\t\t\t\n\t\t\t\tvar phone = $('#nl-form').find('[name=\"phone\"]').val(),\n\t\t\t\t\temail = $('#nl-form').find('[name=\"email\"]').val(),\n\t\t\t\t\tfv = $('#nl-form').data('formValidation');\n\t\t\t\tconsole.log('key up')\n\t\t\t\tswitch (this.elOriginal.id) {\n\t\t\t\t\t// User is focusing the ssn field\n\t\t\t\t\tcase 'email':\n\t\t\t\t\t\tfv.enableFieldValidators('phone', email === '').revalidateField('phone');\n\n\t\t\t\t\t\tif (email && fv.getOptions('email', null, 'enabled') === false) {\n\t\t\t\t\t\t\tfv.enableFieldValidators('email', true).revalidateField('email');\n\t\t\t\t\t\t} else if (email === '' && phone !== '') {\n\t\t\t\t\t\t\tfv.enableFieldValidators('email', false).revalidateField('email');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t// User is focusing the drivers license field\n\t\t\t\t\tcase 'phone':\n\t\t\t\t\t\tif (phone === '') {\n\t\t\t\t\t\t\tfv.enableFieldValidators('email', true).revalidateField('email');\n\t\t\t\t\t\t} else if (email === '') {\n\t\t\t\t\t\t\tfv.enableFieldValidators('email', false).revalidateField('email');\n\t\t\t\t\t\t\tconsole.log('check email')\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (phone && email === '' && fv.getOptions('phone', null, 'enabled') === false) {\n\t\t\t\t\t\t\tfv.enableFieldValidators('phone', true).revalidateField('phone');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t$('#nl-form').formValidation('revalidateField', this.elOriginal.id);\n\t\t\t\tif (this.elOriginal.value === '') {\n\n\t\t\t\t\tif (this.getinput.localName == 'textarea') {\n\t\t\t\t\t\t$('.textarea .formField-toggle').removeClass('active');\n\t\t\t\t\t\t$('.textarea').removeClass('active');\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (this.getinput.localName == 'textarea') {\n\t\t\t\t\t\t$('.textarea .formField-toggle').addClass('active');\n\t\t\t\t\t\t$('.textarea').removeClass('active');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\t// add to global namespace\n\twindow.NLForm = NLForm;\n\n\tfunction getCaret(el) {\n\t\tif (el.selectionStart) {\n\t\t\treturn el.selectionStart;\n\t\t} else if (document.selection) {\n\t\t\tel.focus();\n\t\t\tvar r = document.selection.createRange();\n\t\t\tif (r == null) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tvar re = el.createTextRange(),\n\t\t\t\trc = re.duplicate();\n\t\t\tre.moveToBookmark(r.getBookmark());\n\t\t\trc.setEndPoint('EndToStart', re);\n\t\t\treturn rc.text.length;\n\t\t}\n\t\treturn 0;\n\t}\n\n})(window);"],"sourceRoot":"/source/"}