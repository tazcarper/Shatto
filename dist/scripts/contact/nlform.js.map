{"version":3,"sources":["contact/nlform.js"],"names":[],"mappings":"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","file":"contact/nlform.js","sourcesContent":[";\n(function(window) {\n\n\t'use strict';\n\n\tvar document = window.document;\n\n\tif (!String.prototype.trim) {\n\t\tString.prototype.trim = function() {\n\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\n\t\t};\n\t}\n\n\tfunction NLForm(el) {\n\t\tthis.el = el;\n\t\tthis.overlay = this.el.querySelector('.formOverlay');\n\t\tthis.fields = [];\n\t\tthis.fldOpen = -1;\n\t\tthis._init();\n\t}\n\n\tNLForm.prototype = {\n\t\t_init: function() {\n\t\t\tvar self = this;\n\t\t\tArray.prototype.slice.call(this.el.querySelectorAll('select')).forEach(function(el, i) {\n\t\t\t\tself.fldOpen++;\n\t\t\t\tself.fields.push(new NLField(self, el, 'dropdown', self.fldOpen));\n\t\t\t});\n\t\t\tArray.prototype.slice.call(this.el.querySelectorAll('input')).forEach(function(el, i) {\n\t\t\t\tself.fldOpen++;\n\t\t\t\tself.fields.push(new NLField(self, el, 'input', self.fldOpen));\n\t\t\t});\n\t\t\tthis.overlay.addEventListener('click', function(ev) {\n\t\t\t\tself._closeFlds();\n\t\t\t});\n\t\t\tthis.overlay.addEventListener('touchstart', function(ev) {\n\t\t\t\tself._closeFlds();\n\t\t\t});\n\t\t},\n\t\t_closeFlds: function() {\n\t\t\tif (this.fldOpen !== -1) {\n\t\t\t\tthis.fields[this.fldOpen].close();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction NLField(form, el, type, idx) {\n\t\tthis.form = form;\n\t\tthis.elOriginal = el;\n\t\tthis.pos = idx;\n\t\tthis.type = type;\n\t\tthis._create();\n\t\tthis._initEvents();\n\t}\n\n\tNLField.prototype = {\n\t\t_create: function() {\n\t\t\tif (this.type === 'dropdown') {\n\t\t\t\tthis._createDropDown();\n\t\t\t} else if (this.type === 'input') {\n\t\t\t\tthis._createInput();\n\t\t\t}\n\t\t},\n\t\t_createDropDown: function() {\n\t\t\tvar self = this;\n\t\t\tthis.fld = document.createElement('div');\n\t\t\tthis.fld.className = 'formField formDropdown';\n\t\t\tthis.toggle = document.createElement('a');\n\t\t\tthis.toggle.innerHTML = this.elOriginal.options[this.elOriginal.selectedIndex].innerHTML;\n\t\t\tthis.toggle.className = 'formField-toggle';\n\t\t\tthis.optionsList = document.createElement('ul');\n\t\t\tvar ihtml = '';\n\t\t\tArray.prototype.slice.call(this.elOriginal.querySelectorAll('option')).forEach(function(el, i) {\n\t\t\t\tihtml += self.elOriginal.selectedIndex === i ? '<li class=\"formDropdown-checked\">' + el.innerHTML + '</li>' : '<li>' + el.innerHTML + '</li>';\n\t\t\t\t// selected index value\n\t\t\t\tif (self.elOriginal.selectedIndex === i) {\n\t\t\t\t\tself.selectedIdx = i;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.optionsList.innerHTML = ihtml;\n\t\t\tthis.optionsList.className =\"custom_dropdown\";\n\t\t\tthis.ddContainer = document.createElement('div');\n\t\t\tthis.ddContainer.className = \"selection\";\n\t\t\tthis.fld.appendChild(this.toggle);\n\n\t\t\tthis.ddContainer.appendChild(this.optionsList);\n\t\t\tthis.elOriginal.parentNode.insertBefore(this.fld, this.elOriginal);\n\t\t\tthis.fld.parentNode.insertBefore(this.ddContainer,this.fld)\n\t\t\tthis.elOriginal.style.display = 'none';\n\t\t},\n\t\t_createInput: function() {\n\t\t\tvar self = this;\n\t\t\tconsole.log(this);\n\n\t\t\tthis.fld = document.createElement('div');\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\tthis.fld.className = 'formField userMsg textarea';\n\t\t\t} else {\n\t\t\t\tthis.fld.className = 'formField userMsg';\n\t\t\t}\n\t\t\tthis.toggle = document.createElement('a');\n\t\t\tthis.toggle.innerHTML = this.elOriginal.getAttribute('placeholder');\n\t\t\tthis.toggle.className = 'formField-toggle';\n\t\t\tthis.optionsList = document.createElement('ul');\n\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\tthis.getinput = document.createElement('textarea');\n\t\t\t\tthis.getinput.className = \"common\"\n\t\t\t} else {\n\t\t\t\tthis.getinput = document.createElement('input');\n\t\t\t\tthis.getinput.setAttribute('type', 'text');\n\t\t\t}\n\n\t\t\tthis.getinput.setAttribute('placeholder', this.elOriginal.getAttribute('placeholder'));\n\t\t\tthis.getinputWrapper = document.createElement('li');\n\t\t\tthis.getinputWrapper.className = 'nl-ti-input';\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\tthis.inputsubmit = document.createElement('span');\n\t\t\t\tthis.inputsubmit.className = 'formField-go icon-checkmark bottom';\n\t\t\t} else {\n\t\t\t\tthis.inputsubmit = document.createElement('span');\n\t\t\t\tthis.inputsubmit.className = 'formField-go icon-checkmark';\n\t\t\t}\n\n\n\t\t\tthis.getinputWrapper.appendChild(this.getinput);\n\t\t\tthis.getinputWrapper.appendChild(this.inputsubmit);\n\t\t\t// this.example = document.createElement( 'li' );\n\t\t\t// this.example.className = 'nl-ti-example';\n\t\t\t// this.example.innerHTML = this.elOriginal.getAttribute( 'data-subline' );\n\t\t\tthis.optionsList.appendChild(this.getinputWrapper);\n\t\t\t// this.optionsList.appendChild( this.example );\n\t\t\tthis.fld.appendChild(this.toggle);\n\t\t\tthis.fld.appendChild(this.optionsList);\n\t\t\tthis.elOriginal.parentNode.insertBefore(this.fld, this.elOriginal);\n\t\t\tthis.elOriginal.style.display = 'none';\n\t\t},\n\t\t_initEvents: function() {\n\t\t\tvar self = this;\n\t\t\tthis.toggle.addEventListener('click', function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopPropagation();\n\t\t\t\tself._open();\n\t\t\t});\n\t\t\tthis.toggle.addEventListener('touchstart', function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopPropagation();\n\t\t\t\tself._open();\n\t\t\t});\n\n\t\t\tif (this.type === 'dropdown') {\n\t\t\t\tvar opts = Array.prototype.slice.call(this.optionsList.querySelectorAll('li'));\n\t\t\t\topts.forEach(function(el, i) {\n\t\t\t\t\tel.addEventListener('click', function(ev) {\n\t\t\t\t\t\tconsole.log('clicked an item');\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\tconsole.log(el);\n\t\t\t\t\t\tconsole.log(opts.indexOf(el));\n\t\t\t\t\t\tself.close(el, opts.indexOf(el));\n\t\t\t\t\t});\n\t\t\t\t\tel.addEventListener('touchstart', function(ev) {\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\tself.close(el, opts.indexOf(el));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else if (this.type === 'input' && this.elOriginal.className === 'message') {\n\t\t\t\tthis.getinput.addEventListener('keypress', function(ev) {\n\t\t\t\t\tif (ev.which === 13) {\n\t\t\t\t\t\tvar content = this.value;\n\t\t\t\t\t\tvar caret = getCaret(this);\n\t\t\t\t\t\tif (ev.shiftKey) {\n\t\t\t\t\t\t\tthis.value = content + \"\\n\" + content.substring(caret, content.length);\n\t\t\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// this.value = content.substring(0, caret - 1) + content.substring(caret, content.length);\n\t\t\t\t\t\t\tconsole.log(this.value);\n\t\t\t\t\t\t\tthis.value = this.value.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n\t\t\t\t\t\t\tself.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('click', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('touchstart', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t} else if (this.type === 'input') {\n\t\t\t\tthis.getinput.addEventListener('keypress', function(ev) {\n\t\t\t\t\tif (ev.which === 13) {\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('click', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t\tthis.inputsubmit.addEventListener('touchstart', function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself.close();\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\t\t_open: function() {\n\t\t\tif (this.open) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.open = true;\n\t\t\tthis.form.fldOpen = this.pos;\n\t\t\tvar self = this;\n\t\t\tconsole.log(this);\n\n\t\t\tconsole.log(this.elOriginal.type);\n\t\t\tif (this.elOriginal.type === 'select-one') {\n\t\t\t\tconsole.log('its dropdown')\n\t\t\t\t$('.selection').addClass('open');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.fld.className += ' formField-open';\n\t\t\t}\n\t\t\tif (this.elOriginal.className === 'message') {\n\t\t\t\t$('.formField-open textarea').val(this.elOriginal.value.replace(/<br\\s*[\\/]?>/gi, \"\\n\"));\n\t\t\t\tconsole.log(this.elOriginal.value);\n\t\t\t\t$('.formField-open textarea').focus();\n\n\t\t\t\t$('.formField-open textarea').attr('placeholder', '');\n\t\t\t\tconsole.log(this);\n\n\t\t\t} else {\n\t\t\t\t$('.formField-open input').focus();\n\t\t\t}\n\t\t\t$('.formOverlay').addClass('open');\n\t\t},\n\t\tclose: function(opt, idx) {\n\t\t\tif (!this.open) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.open = false;\n\t\t\tthis.form.fldOpen = -1;\n\n\t\t\t$('.formOverlay').removeClass('open');\n\t\t\tif (this.type === 'dropdown') {\n\t\t\t\t$('.selection').removeClass('open');\n\t\t\t\tif (opt) {\n\n\t\t\t\t\tvar selectedopt = this.optionsList.children[this.selectedIdx];\n\t\t\t\t\tselectedopt.className = '';\n\t\t\t\t\topt.className = 'checked';\n\t\t\t\t\tthis.toggle.innerHTML = opt.innerHTML;\n\t\t\t\t\t// update selected index value\n\t\t\t\t\tthis.selectedIdx = idx;\n\t\t\t\t\t// update original select element´s value\n\t\t\t\t\tthis.elOriginal.value = this.elOriginal.children[this.selectedIdx].value;\n\t\t\t\t}\n\t\t\t} else if (this.type === 'input') {\n\t\t\t\tthis.fld.className = this.fld.className.replace(/\\b formField-open\\b/, '');\n\t\t\t\tthis.getinput.blur();\n\t\t\t\tthis.toggle.innerHTML = this.getinput.value.trim() !== '' ? this.getinput.value : this.getinput.getAttribute('placeholder');\n\t\t\t\tthis.elOriginal.value = this.getinput.value;\n\t\t\t\tconsole.log(this.elOriginal.value)\n\t\t\t\tif (this.elOriginal.value === '') {\n\t\t\t\t\tconsole.log('its blank');\n\t\t\t\t\t$('.textarea .formField-toggle').text('___________________________________________________');\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\t// add to global namespace\n\twindow.NLForm = NLForm;\n\n\tfunction getCaret(el) {\n\t\tif (el.selectionStart) {\n\t\t\treturn el.selectionStart;\n\t\t} else if (document.selection) {\n\t\t\tel.focus();\n\t\t\tvar r = document.selection.createRange();\n\t\t\tif (r == null) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tvar re = el.createTextRange(),\n\t\t\t\trc = re.duplicate();\n\t\t\tre.moveToBookmark(r.getBookmark());\n\t\t\trc.setEndPoint('EndToStart', re);\n\t\t\treturn rc.text.length;\n\t\t}\n\t\treturn 0;\n\t}\n\n})(window);"],"sourceRoot":"/source/"}